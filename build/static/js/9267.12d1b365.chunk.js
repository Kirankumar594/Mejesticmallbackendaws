"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[9267],{77590:(e,t,i)=>{i.d(t,{A:()=>s});var o=i(65043),l=i(70579);const s=e=>{let{message:t,show:i,onClose:s}=e;return(0,o.useEffect)((()=>{if(i){const e=setTimeout((()=>{s()}),5e3);return()=>clearTimeout(e)}}),[i,s]),i?(0,l.jsx)("div",{className:"notification-banner",children:(0,l.jsx)("p",{children:t})}):null}},79267:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var o=i(65043),l=i(83003),s=i(73216),d=i(35475),n=i(86213),r=i(80229),c=i(78745),a=(i(87923),i(12110)),u=i(43845),v=i(63336),g=i(54669),x=i(24056),h=i(15316),p=i(56174),m=i(71360),b=i(51419),f=i(28646),y=i(11178),j=i(22019),w=i(37490),N=i(77590),A=i(1880),C=i(86111),S=i.n(C),k=i(70579);const _=()=>{var e,t,i,C,_,T,O;const $=(0,l.wA)(),z=(0,s.Zp)(),E=(0,s.g)();let J=A.A.get("AllTextHead");const R=(0,l.d4)((e=>null===e||void 0===e?void 0:e.cart1)),F="Abhinanadan02",P=A.A.get("user"),B=P?JSON.parse(S().AES.decrypt(P,F).toString(S().enc.Utf8)):null,M=A.A.get("token"),W=M?S().AES.decrypt(M,F).toString(S().enc.Utf8):null,U=A.A.get("AllText"),Y=U?JSON.parse(S().AES.decrypt(U,F).toString(S().enc.Utf8)):null,[L,V]=(0,o.useState)([]),[X,q]=(0,o.useState)([]),[D,G]=(0,o.useState)({}),[H,Z]=(0,o.useState)(""),[I,K]=(0,o.useState)(0);(0,o.useEffect)((()=>{ne(),oe(),le()}),[]);const[Q,ee]=(0,o.useState)([]),[te,ie]=(0,o.useState)([]),oe=async()=>{try{const t=await n.A.get("https://majesticmall.net/api/admin/getCategory",{headers:{Authorization:`Bearer ${W}`}});var e;if(200===t.status)ee(null===(e=t.data)||void 0===e?void 0:e.category.filter((e=>"Active"===e.status)))}catch(t){console.error("Error fetching categories:",t)}},le=async()=>{try{const t=await n.A.get("https://majesticmall.net/api/admin/getSubcategory",{headers:{Authorization:`Bearer ${W}`}});var e;if(200===t.status)ie(null===(e=t.data)||void 0===e?void 0:e.Subcategory.filter((e=>"Active"===e.status)))}catch(t){console.error("Error fetching subcategories:",t)}},[se,de]=(0,o.useState)([]),ne=async()=>{try{const e=await n.A.get("https://majesticmall.net/api/admin/Getproductlist",{headers:{Authorization:`Bearer ${W}`}});if(200===e.status){const t=e.data.ProductList.filter((e=>"Active"===e.status));V(t),de(t);const i={};t.forEach((e=>{var t,o;i[e._id]=null!==B&&void 0!==B&&B.club?null===(o=e.Clubweight)||void 0===o?void 0:o[0]:null===(t=e.weight)||void 0===t?void 0:t[0]})),G(i)}}catch(e){console.error("Error fetching products:",e)}},[re,ce]=(0,o.useState)({}),ae=(null===X||void 0===X?void 0:X.find((e=>(null===e||void 0===e?void 0:e._id)===E.id)))||(null===L||void 0===L?void 0:L.find((e=>(null===e||void 0===e?void 0:e._id)===E.id))),ue=D[null===ae||void 0===ae?void 0:ae._id],ve=re[null===ae||void 0===ae?void 0:ae._id]||1;(0,o.useEffect)((()=>{var e,t;(null===ae||void 0===ae||null===(e=ae.Photos)||void 0===e?void 0:e.length)>0&&Z(null===(t=ae.Photos[0])||void 0===t?void 0:t.file)}),[ae]);const ge=(e,t)=>{ce((i=>({...i,[e._id]:Math.max((i[e._id]||1)+t,1)})))},[xe,he]=(0,o.useState)({show:!1,message:""}),pe=e=>{if(e.stock-(null===e||void 0===e?void 0:e.sellproduct)<=0)return j.Ay.error("Out of stock");if(0==Object.keys(e).length)return j.Ay.error("Product not found");e.weight[0].discount=null===e||void 0===e?void 0:e.discount,e.Clubweight[0].discount=null===e||void 0===e?void 0:e.clubdiscount;const t=D[e._id]||(null!==B&&void 0!==B&&B.club?e.Clubweight[0]:e.weight[0]),i=re[e._id]||1;j.Ay.success(`Success: You have added ${null===e||void 0===e?void 0:e.productname} to your cart!`),$((0,y.mV)({...e,selectedWeight:t,quantity:i}))},me=e=>{const t=D[e._id]||(null!==B&&void 0!==B&&B.club?e.Clubweight[0]:e.weight[0]);$((0,y.ul)({_id:e._id,selectedWeight:t})),ce((t=>({...t,[e._id]:Math.max((t[e._id]||0)-1,0)})))},be=e=>{z(`/shop-detail1/${null===e||void 0===e?void 0:e._id}`),window.scrollTo({top:0,behavior:"smooth"})},fe=e=>{B?(z(`/subscribe/${e._id}`,{state:{selectedWeight:D[e._id]}}),window.scrollTo({top:0,behavior:"smooth"})):c.oR.info("Please login to subscribe")},[ye,je]=(0,o.useState)({}),[we,Ne]=(0,o.useState)({display:"none"}),Ae=null===Q||void 0===Q?void 0:Q.find((e=>"Fruits & Vegetables"==(null===e||void 0===e?void 0:e.categoryName)));if(!ae)return null;if(!ae)return null;const Ce=e=>{var t;return null===R||void 0===R||null===(t=R.items1)||void 0===t?void 0:t.some((t=>t._id===e._id))},Se=Ce(ae),ke=null===Q||void 0===Q||null===(e=Q.filter((e=>e._id===ae.category))[0])||void 0===e?void 0:e.categoryName,_e=null===te||void 0===te||null===(t=te.filter((e=>e._id===ae.subcategory))[0])||void 0===t?void 0:t.SubcategoryName;return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,k.jsx)(c.N9,{}),(0,k.jsx)(N.A,{message:xe.message,show:xe.show,onClose:()=>he({...xe,show:!1})}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)(a.A,{className:"overflow-hidden relative w-[100%] ",children:(0,k.jsxs)("div",{className:"relative bg-white",onMouseMove:e=>{const t=e.currentTarget.getBoundingClientRect(),i=(e.clientX-t.left)/t.width*100,o=(e.clientY-t.top)/t.height*100;je({transformOrigin:`${i}% ${o}%`,transform:"scale(2)"}),Ne({display:"block",top:e.clientY-t.top-50+"px",left:e.clientX-t.left-50+"px"})},onMouseLeave:()=>{je({transform:"scale(1)",transformOrigin:"center center"}),Ne({display:"none"})},style:{overflow:"hidden",height:"420px"},children:[(0,k.jsx)("img",{src:`https://majesticmall.net/product/${H}`,alt:null===ae||void 0===ae?void 0:ae.productname,loading:"lazy",className:"object-contain transition-transform duration-300",style:{width:"100%",height:"100%",...ye},onError:e=>{e.target.src="../img/example.jpg"}}),(0,k.jsx)("div",{className:"absolute w-24 h-24 rounded-full bg-black opacity-30 pointer-events-none",style:{position:"absolute",...we}}),(null===ae||void 0===ae?void 0:ae.tag)&&(0,k.jsx)("span",{className:"absolute top-4 left-4 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",style:{backgroundColor:"#000"},children:null===ae||void 0===ae?void 0:ae.tag})]})}),(0,k.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:null===ae||void 0===ae||null===(i=ae.Photos)||void 0===i?void 0:i.map(((e,t)=>(0,k.jsx)("button",{onClick:()=>Z(null===e||void 0===e?void 0:e.file),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all\n                  "+(H===(null===e||void 0===e?void 0:e.file)?"border-primary opacity-100":"border-transparent opacity-60 hover:opacity-100"),children:(0,k.jsx)("img",{src:`https://majesticmall.net/product/${null===e||void 0===e?void 0:e.file}`,alt:"",className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.target.src="../img/example.jpg"}})},t)))})]}),(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:null===ae||void 0===ae?void 0:ae.productname}),(0,k.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,k.jsx)(u.A,{label:"Category : "+ke,sx:{mr:1,mb:1},style:{backgroundColor:"white"}}),(0,k.jsx)(u.A,{label:"Sub-Category : "+_e,sx:{mb:1},style:{backgroundColor:"white"}})]})]}),(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsxs)("select",{name:"option[504]",id:"input-option504",className:"w-full p-2 border rounded-lg bg-background",style:{maxWidth:"200px"},onChange:e=>{const t=JSON.parse(e.target.value),i="discount"===t.discountType?null===ae||void 0===ae?void 0:ae.discount:null===ae||void 0===ae?void 0:ae.clubdiscount;G((e=>({...e,[ae._id]:{...t,discount:i,discountType:null===t||void 0===t?void 0:t.discountType}})))},value:JSON.stringify(ue),children:[!(null!==B&&void 0!==B&&B.club)&&(null===ae||void 0===ae||null===(C=ae.weight)||void 0===C?void 0:C.map((e=>(0,k.jsxs)("option",{value:JSON.stringify({...e,discount:null===ae||void 0===ae?void 0:ae.discount,discountType:"discount"}),children:[e.value," ",e.units," - Rs"," ",(e.price-e.price*((null===ae||void 0===ae?void 0:ae.discount)/100)).toFixed(2)]},`weight-${e.id}`)))),null===ae||void 0===ae||null===(_=ae.Clubweight)||void 0===_?void 0:_.map((e=>(0,k.jsxs)("option",{value:JSON.stringify({...e,discount:null===ae||void 0===ae?void 0:ae.clubdiscount,discountType:"clubdiscount"}),disabled:!B||!1===(null===B||void 0===B?void 0:B.club),style:{color:B&&!1!==(null===B||void 0===B?void 0:B.club)?"inherit":"#aaa"},children:[e.value," ",e.units," - Rs"," ",(e.price-e.price*((null===ae||void 0===ae?void 0:ae.clubdiscount)/100)).toFixed(2),!(null!==B&&void 0!==B&&B.club)&&" (Club Members Only)"]},`clubweight-${e.id}`)))]}),ae.stock-(null===ae||void 0===ae?void 0:ae.sellproduct)<=0?null:(0,k.jsx)("div",{className:"flex items-center gap-4",children:(0,k.jsxs)("div",{className:"flex items-center gap-2 border rounded-lg p-1 bg-white",children:[(0,k.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?me(ae):ae.category==(null===Ae||void 0===Ae?void 0:Ae._id)&&J?j.Ay.error(J):me(ae)},className:"p-1 hover:bg-gray-100 rounded",children:(0,k.jsx)(p.A,{size:16})}),(0,k.jsx)("span",{className:"w-8 text-center",children:ve}),(0,k.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ge(ae,1):ae.category==(null===Ae||void 0===Ae?void 0:Ae._id)&&J?j.Ay.error(J):ge(ae,1)},className:"p-1 hover:bg-gray-100 rounded",children:(0,k.jsx)(m.A,{size:16})})]})})]}),ae.stock-(null===ae||void 0===ae?void 0:ae.sellproduct)<=0?(0,k.jsx)("p",{style:{color:"red",paddingTop:"27px",textAlign:"center",fontWeight:"500"},children:"Out of Stock"}):(0,k.jsxs)("div",{className:"",children:[Se?(0,k.jsxs)("button",{onClick:()=>pe(ae),className:"flex-1 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-primary/90 ",style:{backgroundColor:"#f7ab27"},children:[(0,k.jsx)(b.A,{size:18}),"Update Cart"]}):(0,k.jsxs)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category||ae.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?pe(ae):J?j.Ay.error(J):pe(ae)},className:"flex-1 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-primary/90",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||ae.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?"#000":J?"rgb(204 225 166)":"#000"},children:[(0,k.jsx)(b.A,{size:18}),"Add to Cart"]}),"Subscription"===ae.subscribe&&(0,k.jsxs)("button",{onClick:()=>fe(ae),className:"flex-1 border border-primary px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-primary/5",style:{color:"white",backgroundColor:"#0c363b"},children:[(0,k.jsx)(f.A,{size:18}),"Subscribe"]})]}),(0,k.jsxs)(v.A,{elevation:3,sx:{p:3},children:[(0,k.jsx)(g.A,{value:I,onChange:(e,t)=>K(t),children:(0,k.jsx)(x.A,{label:"Description",style:{color:"#000",borderBottomColor:"#000"}})}),(0,k.jsx)(h.A,{sx:{mt:2},children:ae.description?(0,r.Ay)(ae.description):""})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"mx-5 text-3xl font-bold mt-10 mb-4",style:{color:"#45595b"},children:"Recently added products"}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:null===se||void 0===se||null===(T=se.filter((e=>(null===Ae||void 0===Ae?void 0:Ae._id)==(null===e||void 0===e?void 0:e.category))))||void 0===T||null===(O=T.slice(0,5))||void 0===O?void 0:O.map((e=>{var t,i,o;const l=D[e._id],s=re[e._id]||1,n=Ce(e);return(0,k.jsxs)("div",{className:"box border rounded-lg border-#f7ab27-400 mx-auto w-full  max-w-xs shadow-lg hover:shadow-xl transition-shadow duration-300 bg-white",style:{height:"300px",marginBottom:"5px"},children:[(0,k.jsx)(w.A.Ribbon,{text:e.tag,color:"#f7ab27",children:(0,k.jsx)("div",{className:"shop-detailrelative overflow-clip",children:(0,k.jsx)(d.N_,{to:`/shop-detail1/${e._id}`,children:(0,k.jsx)("img",{className:"hover:scale-105 transition-transform duration-500 ease-in-out w-full rounded-lg shadow-lg",src:`https://majesticmall.net/product/${null===(t=e.Photos[0])||void 0===t?void 0:t.file}`,alt:"Product",loading:"lazy",style:{height:"130px",width:"350px",marginTop:"10px",objectFit:"contain",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>be(e),onError:e=>{e.target.src="../img/example.jpg"}})})})}),(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)(d.N_,{to:`/shop-detail1/${e._id}`,children:(0,k.jsx)("h3",{className:"text-l mt-4 font-semibold",style:{color:"#45595b",cursor:"pointer"},onClick:()=>be(e),children:e.productname.slice(0,20)})}),(0,k.jsxs)("select",{name:"option[504]",id:"input-option504",className:"form-control1 weight resp-select-box",style:{maxWidth:"200px",fontSize:"12px",border:"1px solid #88ac46"},onChange:t=>{const i=JSON.parse(t.target.value),o="discount"===i.discountType?e.discount:e.clubdiscount;G((t=>({...t,[e._id]:{...i,discount:o,discountType:i.discountType}})))},value:JSON.stringify(l),children:[!(null!==B&&void 0!==B&&B.club)&&(null===(i=e.weight)||void 0===i?void 0:i.map((t=>(0,k.jsxs)("option",{style:{fontSize:"12px"},value:JSON.stringify({...t,discount:e.discount,discountType:"discount"}),children:[t.value," ",t.units," - Rs",(t.price-t.price*(e.discount/100)).toFixed(2)]},`weight-${t.id}`)))),null===(o=e.Clubweight)||void 0===o?void 0:o.map((t=>(0,k.jsxs)("option",{value:JSON.stringify({...t,discount:e.clubdiscount,discountType:"clubdiscount"}),disabled:!B||!1===B.club,style:{color:B&&!1!==B.club?"inherit":"#aaa",fontSize:"12px"},children:[t.value," ",t.units," - Rs"," ",(t.price-t.price*(e.clubdiscount/100)).toFixed(2)," ",!(null!==B&&void 0!==B&&B.club)&&" (Club Members Only)"]},`clubweight-${t.id}`)))]})]}),e.stock-(null===e||void 0===e?void 0:e.sellproduct)<=0?(0,k.jsx)("p",{style:{color:"red",paddingTop:"27px",textAlign:"center",fontWeight:"500"},children:"Out of Stock"}):(0,k.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,k.jsx)("div",{className:"flex-grow flex justify-center",children:"Subscription"===e.subscribe?(0,k.jsxs)(k.Fragment,{children:[" ",n?(0,k.jsx)("button",{onClick:()=>pe(e),className:"font-semibold px-3 py-1 text-xs text-white rounded-2xl",style:{backgroundColor:"#f7ab27",color:"#fff"},children:"Update cart"}):(0,k.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category||e.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?pe(e):J?j.Ay.error(J):pe(e)},className:"font-semibold px-3 py-1 text-xs text-white rounded-2xl",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||e.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?"#000":J?"rgb(204 225 166)":"#000",color:"#fff"},children:"Buy Once"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex items-center mr-2 ",children:[(0,k.jsx)("button",{className:"lg:text-lg md:text-md sm:text-sm font-semibold bg-[#ffb524] text-white rounded-full size-7 flex justify-center items-center ",onClick:()=>{null!==Y&&void 0!==Y&&Y.category?me(e):e.category==(null===Ae||void 0===Ae?void 0:Ae._id)&&J?j.Ay.error(J):me(e)},children:"-"}),(0,k.jsx)("span",{className:"px-3",children:s}),(0,k.jsx)("button",{className:"lg:text-lg md:text-md sm:text-sm font-semibold bg-[#ffb524] text-white rounded-full size-7 flex justify-center items-center ",onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ge(e,1):e.category==(null===Ae||void 0===Ae?void 0:Ae._id)&&J?j.Ay.error(J):ge(e,1)},children:"+"})]}),n?(0,k.jsx)("button",{onClick:()=>pe(e),className:"font-semibold px-3 py-2 text-xs truncate text-white rounded-full bg-[#f7ab27]",style:{backgroundColor:"#f7ab27",color:"#fff"},children:"Update cart"}):(0,k.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category||e.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?pe(e):J?j.Ay.error(J):pe(e)},className:"font-semibold px-3 py-2 text-xs text-white rounded-full ",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||e.category!=(null===Ae||void 0===Ae?void 0:Ae._id)?"#000":J?"rgb(204 225 166)":"#000",color:"#fff"},children:"Add to cart"})]})}),"Subscription"===e.subscribe&&(0,k.jsx)("button",{onClick:()=>fe(e),className:"font-semibold px-3 py-1 text-xs text-white rounded-2xl",style:{backgroundColor:"#0c363b",marginRight:"15px"},children:"Subscribe"})]})]},e._id)}))})]})]})}}}]);
//# sourceMappingURL=9267.12d1b365.chunk.js.map