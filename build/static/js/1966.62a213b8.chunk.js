"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[1966],{91966:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(65043),i=a(23927),r=a(29157),s=a(6051),l=a(3188),o=a(27210),d=a(97107),c=a(49757),h=a(62058),u=a(86213),m=a(11238),p=a(86178),x=a.n(p),f=a(78745),g=a(39292),A=a(40614),w=a(1457),j=a(1880),v=a(86111),y=a.n(v),I=a(70579);const{Title:k}=i.A,D=[{title:"SNo",dataIndex:"Sno",width:50},{title:"DriverID",dataIndex:"driverId",width:100},{title:"Name",dataIndex:"name",width:100},{title:"Email",dataIndex:"email",width:150},{title:"Mobile",dataIndex:"mobile",width:100},{title:"Registered Date",dataIndex:"RegisteredDate",width:100},{title:"Aadhar Front",dataIndex:"aadharFront",width:100,render:e=>(0,I.jsx)(r.A,{src:e,width:50})},{title:"Aadhar Back",dataIndex:"aadharBack",width:100,render:e=>(0,I.jsx)(r.A,{src:e,width:50})},{title:"DL Image",dataIndex:"dlImage",width:100,render:e=>(0,I.jsx)(r.A,{src:e,width:50})},{title:"PAN Image",dataIndex:"panImage",width:100,render:e=>(0,I.jsx)(r.A,{src:e,width:50})},{title:"Action",dataIndex:"action",width:100}],b=()=>{const[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),[r,p]=(0,n.useState)(!1),v=j.A.get("token"),b=v?y().AES.decrypt(v,"Abhinanadan02").toString(y().enc.Utf8):null,S=async()=>{let e=await u.A.get("https://majesticmall.net/api/user/getAlldriver",{headers:{Authorization:`Bearer ${b}`}});200===e.status&&t(e.data.success)};(0,n.useEffect)((()=>{S()}),[]);const B=e=>null===e||void 0===e?void 0:e.map(((e,t)=>({Sno:t+1,driverId:e.driverId,name:e.name,email:e.email,mobile:e.mobile,RegisteredDate:x()(e.createdAt).format("DD/MM/YYYY"),Date:e.createdAt,aadharFront:`https://majesticmall.net/driver/${e.aadharFront}`,aadharBack:`https://majesticmall.net/driver/${e.aadharBack}`,dlImage:`https://majesticmall.net/driver/${e.dlImage}`,panImage:`https://majesticmall.net/driver/${e.panImage}`,action:(0,I.jsx)(s.A,{children:e.blockstatus?(0,I.jsx)(l.Ay,{type:"primary",onClick:()=>C(e),children:"Approve"}):(0,I.jsx)(l.Ay,{danger:!0,onClick:()=>(async e=>{try{u.A.get("https://majesticmall.net/api/user/changedriverBlockStatus/"+e._id,{headers:{Authorization:`Bearer ${b}`}}).then((function(e){200===e.status&&(f.oR.info("Blocked successfully"),window.location.reload())})).catch((function(e){f.oR.info("Not able to complete")}))}catch(t){return console.warn(t),f.oR.info("Not able to complete"),t}})(e),children:"Block"})})}))),C=async e=>{try{u.A.get("https://majesticmall.net/api/user/changedriverunBlockStatus/"+e._id,{headers:{Authorization:`Bearer ${b}`}}).then((function(e){200===e.status&&(f.oR.info("Unblocked successfully"),window.location.reload())})).catch((function(e){f.oR.info("Not able to complete")}))}catch(t){return console.warn(t),f.oR.info("Not able to complete"),t}},[R,_]=(0,n.useState)([]),[N,z]=(0,n.useState)([]);(0,n.useEffect)((()=>{S().then((e=>{t(e)}))}),[]),(0,n.useEffect)((()=>{if(e&&e.length>0){const t=B(e);_(t),z(t)}}),[e]);const[E,$]=(0,n.useState)(""),F=e=>{$(e);const t=R.filter((t=>Object.values(t).some((t=>t&&t.toString().toLowerCase().includes(e.toLowerCase())))));z(t)},[Y,L]=(o.A,h.A,(0,n.useState)([null,null]));return(0,I.jsxs)("div",{style:{padding:"20px"},children:[(0,I.jsx)(f.N9,{}),(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,I.jsx)(k,{level:3,children:"Drivers"}),(0,I.jsxs)(s.A,{children:[(0,I.jsx)(o.A,{placeholder:"Search",value:E,onChange:e=>F(e.target.value),style:{width:200},prefix:(0,I.jsx)(g.A,{size:16}),suffix:E&&(0,I.jsx)(A.A,{size:16,style:{cursor:"pointer"},onClick:()=>F("")})}),(0,I.jsx)(d.A.RangePicker,{value:Y,onChange:e=>{const t=R.filter((t=>{const a=e&&e[0]?new Date(e[0].startOf("day").toDate()):null,n=e&&e[1]?new Date(e[1].endOf("day").toDate()):null,i=new Date(t.Date);return(!a||i>=a)&&(!n||i<=n)}));0===t.length?z([]):(z(t),L(e))}}),(0,I.jsx)(l.Ay,{type:"primary",icon:(0,I.jsx)(w.A,{size:16}),onClick:()=>{const e=N.map((e=>{let{RegisteredDate:t,...a}=e;return a})),t=m.Wp.json_to_sheet(e),a=m.Wp.book_new();m.Wp.book_append_sheet(a,t,"Drivers"),m._h(a,"Drivers.xlsx")},children:"Export to Excel"})]})]}),(0,I.jsx)(c.A,{columns:D,dataSource:N,pagination:{pageSize:5},scroll:{x:"max-content"},components:{header:{cell:e=>(0,I.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}})]})}}}]);
//# sourceMappingURL=1966.62a213b8.chunk.js.map