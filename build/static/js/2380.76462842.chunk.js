"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[2380],{97959:(e,s,a)=>{a.d(s,{A:()=>l});a(65043);var t=a(70579);const l=e=>{const{type:s,label:a,i_id:l,i_class:n,name:i,val:r,onChng:o,onBlr:d,style:c}=e;return(0,t.jsxs)("div",{className:"form-floating mt-3",children:[(0,t.jsx)("label",{htmlFor:a,children:a}),(0,t.jsx)("input",{type:s,className:`form-control ${n}`,id:l,placeholder:a,value:r,onChange:o,style:c,onBlur:d})]})}},22380:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var t=a(65043),l=(a(54737),a(86213)),n=a(78745),i=a(97959),r=a(51788),o=a(79942),d=a(6720),c=a(22019),m=a(70579);const u="AIzaSyDHk6ca_YQVl4SG4v0dMPkBriPtZrPoxpc";function p(){const[e,s]=(0,t.useState)({email:"",mobile:"",amobile:"",houseno:"",landmark:"",address1:"",address2:"",postcode:"",Username:"",password:"",cpassword:"",lat:"",lng:""}),[a,p]=(0,t.useState)(null),h=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((a=>{const{latitude:t,longitude:l}=a.coords;var n,i;n=t,i=l,fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${n},${i}&key=${u}`).then((e=>e.json())).then((a=>{if("OK"===a.status&&a.results.length>0){const t=a.results[0],l=t.address_components;let r=(null===t||void 0===t?void 0:t.formatted_address)||"",o="",d="",c="",m="";l.forEach((e=>{const s=e.types;s.includes("locality")&&(o=e.long_name),s.includes("administrative_area_level_1")&&(d=e.long_name),s.includes("country")&&(c=e.long_name),s.includes("postal_code")&&(m=e.long_name)})),s({...e,address1:r,landmark:t.name,address2:o+" "+d+" "+c,postcode:m,lat:n,lng:i})}else c.Ay.info("Unable to fetch address details.")})).catch((()=>c.Ay.info("Failed to fetch address")))}),(e=>c.Ay.info(e.message))):c.Ay.info("Geolocation is not supported by this browser.")},[g,v]=(0,t.useState)(!1),[y,x]=(0,t.useState)(!0),[f,b]=(0,t.useState)(!0),[j,N]=(0,t.useState)(!1),[A,w]=(0,t.useState)(!1),[P,C]=(0,t.useState)(""),[k,_]=(0,t.useState)(null),O=(e,a,t)=>{t&&!t(a)||s((s=>({...s,[e]:a})))},T=e=>/^[6-9][0-9]{9}$/.test(e);return(0,m.jsxs)("div",{children:[(0,m.jsx)(n.N9,{}),(0,m.jsx)("div",{className:"text-center logo"}),(0,m.jsxs)("div",{className:"wrapper1",children:[(0,m.jsxs)("div",{className:"text-center inner-wrapper1",children:[(0,m.jsx)("h4",{className:"title",children:"Register Your Account"}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsx)("div",{className:"registerinput",style:{position:"relative",width:"30%"},children:(0,m.jsx)(i.A,{type:"text",label:"User Name *",id:"userName",name:"userName",onChng:e=>{const s=e.target.value;/^[a-zA-Z\s]*$/.test(s)&&O("Username",s)},val:e.Username})}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"34%"},children:[(0,m.jsx)(i.A,{type:"tel",label:"Phone Number *",id:"Phone Number",name:"Phone Number",onChng:e=>{const s=e.target.value;/^[0-9\s]*$/.test(s)&&O("mobile",s)},val:e.mobile}),(0,m.jsx)("span",{className:"lighting"})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"33%"},children:[(0,m.jsx)(i.A,{type:"text",label:"Email *",id:"Email",name:"Email",onChng:e=>O("email",e.target.value),val:e.email}),(0,m.jsx)("span",{className:"lighting"})]})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"30%"},children:[(0,m.jsx)(i.A,{type:"tel",label:"Alternative Number (Optional)",id:"APhone Number",name:"APhone Number",onChng:e=>{const s=e.target.value;/^[0-9\s]*$/.test(s)&&O("amobile",s)},val:e.amobile}),(0,m.jsx)("span",{className:"lighting"})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"33%"},children:[(0,m.jsx)(i.A,{type:"text",label:"House Number *",id:"HouseNumber",name:"HouseNumber",onChng:e=>O("houseno",e.target.value),val:e.houseno}),(0,m.jsx)("span",{className:"lighting"})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"34%"},children:[" ",(0,m.jsxs)("div",{className:"relative flex items-center rounded-full align-center",children:[(0,m.jsx)(d.HPi,{className:"ml-2 cursor-pointer ",color:"#000",title:"Current Location",size:23,onClick:()=>h()}),(0,m.jsx)(o.jT,{onLoad:p,onPlaceChanged:()=>{if(!a)return;const t=a.getPlace();if(!t.geometry||!t.address_components)return;const l=t.address_components;let n=null===t||void 0===t?void 0:t.formatted_address,i=t.name,r="",o="",d=t.geometry.location.lat(),c=t.geometry.location.lng();l.forEach((e=>{const s=e.types;s.includes("route")&&(i+=e.long_name),s.includes("locality")&&(r=e.long_name),s.includes("administrative_area_level_1")&&(r+=", "+e.short_name),s.includes("postal_code")&&(o=e.long_name)})),s({...e,landmark:n,address1:i,address2:r,postcode:o,lat:d,lng:c})},className:"px-2 w-100 ",children:(0,m.jsx)(i.A,{type:"text",label:"Address Line 1*",id:"address1",name:"address1",onChng:e=>O("address1",e.target.value),val:e.address1})})]}),(0,m.jsx)("span",{className:"lighting"})]})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"30%"},children:[(0,m.jsx)(i.A,{type:"text",label:"Address Line 2 *",id:"address2",name:"address2",onChng:e=>O("address2",e.target.value),val:e.address2}),(0,m.jsx)("span",{className:"lighting"})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"33%"},children:[(0,m.jsx)(i.A,{type:"text",label:"Landmark *",id:"landmark",name:"landmark",onChng:e=>O("landmark",e.target.value),val:e.landmark}),(0,m.jsx)("span",{className:"lighting"})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"34%"},children:[(0,m.jsx)(i.A,{type:"number",label:"Post Code *",id:"postcode",name:"postcode",onChng:e=>{const s=e.target.value;/^[0-9\s]*$/.test(s)&&O("postcode",s)},val:e.postcode}),(0,m.jsx)("span",{className:"lighting"})]})]}),(0,m.jsxs)("div",{className:"input-row",children:[(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"49%"},children:[(0,m.jsx)(i.A,{type:y?"password":"text",label:"Password *",id:"pass",name:"password",onChng:e=>O("password",e.target.value),val:e.password}),(0,m.jsx)("i",{className:y?"fas fa-eye-slash":"fas fa-eye",onClick:()=>{x(!y)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}})]}),(0,m.jsxs)("div",{className:"registerinput",style:{position:"relative",width:"49%"},children:[(0,m.jsx)(i.A,{type:f?"password":"text",label:"Confirm Password *",id:"cpass",name:"cpassword",onChng:e=>O("cpassword",e.target.value),val:e.cpassword}),(0,m.jsx)("i",{className:f?"fas fa-eye-slash":"fas fa-eye",onClick:()=>{b(!f)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer"}})]})]}),(0,m.jsx)("div",{className:"input-row",style:{marginTop:"20px"},children:(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,m.jsx)("input",{type:"checkbox",id:"terms",checked:g,onChange:e=>v(e.target.checked),style:{cursor:"pointer"}}),(0,m.jsxs)("label",{htmlFor:"terms",style:{cursor:"pointer",margin:0},children:["I have read and agree to the"," ",(0,m.jsx)("a",{href:"/terms",target:"_blank",children:"Terms and Conditions"})]})]})}),(0,m.jsx)("br",{}),(0,m.jsx)("button",{className:"button1",type:"submit",id:"register",style:{width:"300px",marginLeft:"auto",marginRight:"auto"},onClick:async()=>{var s,a,t,n,i,r,o,d,m,u,p;if(null!==(s=e.Username)&&void 0!==s&&s.trim())if(null!==(a=e.email)&&void 0!==a&&a.trim())if(null!==(t=e.mobile)&&void 0!==t&&t.trim())if(T(e.mobile))if(!e.amobile||T(e.amobile))if(null===(n=e.email)||void 0===n||!n.trim()||(m=e.email,/^[^\s@]+@gmail\.com$/.test(m)))if(null!==(i=e.houseno)&&void 0!==i&&i.trim())if(null!==(r=e.address1)&&void 0!==r&&r.trim())if(null!==(o=e.landmark)&&void 0!==o&&o.trim())if(null!==(d=e.postcode)&&void 0!==d&&d.trim())if(u=e.postcode,/^[0-9]{6}$/.test(u))if(!((p=e.password).length<8)&&/[A-Z]/.test(p)&&/[a-z]/.test(p)&&/\d/.test(p))if(e.password===e.cpassword)if(g)try{_({mobile:e.mobile,Amobile:e.amobile,Houseno:e.houseno,address1:e.address1,address2:e.address2,landmark:e.landmark,pincode:e.postcode,email:e.email,password:e.password,name:e.Username,cpassword:e.cpassword,lat:e.lat,lng:e.lng});const s={url:"/sendwithsmsotp",method:"post",baseURL:"https://majesticmall.net/api/user",headers:{"Content-Type":"application/json"},data:{mobile:e.mobile,email:e.email}};200==(await(0,l.A)(s)).status&&(w(!0),c.Ay.success("OTP sent successfully your mobile number!"))}catch(y){var h,v;console.error(y),c.Ay.info((null===(h=y.response)||void 0===h||null===(v=h.data)||void 0===v?void 0:v.error)||"An error occurred while sending OTP")}else c.Ay.info("Please accept the terms and conditions to proceed.");else c.Ay.info("Passwords don't match");else c.Ay.info("Use a minimum of 8 characters, including uppercase letters, lowercase letters, and numbers.");else c.Ay.info("Please enter a valid postal code.");else c.Ay.info("Please enter your postal code.");else c.Ay.info("Please enter a landmark.");else c.Ay.info("Please enter your address line 1.");else c.Ay.info("Please enter your house number.");else c.Ay.info("Please enter a valid email address (e.g., user@gmail.com).");else c.Ay.info("Please enter a valid alternate mobile number.");else c.Ay.info("Please enter a valid mobile number.");else c.Ay.info("Please enter your mobile number.");else c.Ay.info("Please enter your email id.");else c.Ay.info("Please enter your name.")},children:"Register"})]}),(0,m.jsx)("div",{className:"text-center signup-wrapper1",children:(0,m.jsxs)("a",{href:"/login",children:["Already have an account?"," ",(0,m.jsx)("span",{className:"text-primary",children:"Sign In"})]})})]}),(0,m.jsx)(r.A,{isOpen:A,onClose:()=>w(!1),children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsx)("h2",{children:"Enter OTP"}),(0,m.jsx)("div",{className:"form-group",children:(0,m.jsx)("input",{type:"text",className:"form-control",value:P,onChange:e=>C(e.target.value),placeholder:"Enter OTP",style:{margin:"20px 0"}})}),(0,m.jsx)("div",{className:"form-group",children:(0,m.jsx)("button",{className:"btn-link",onClick:async()=>{const e={url:"/sendwithsmsotp",method:"post",baseURL:"https://majesticmall.net/api/user",headers:{"Content-Type":"application/json"},data:{mobile:k.mobile,email:k.email}};200==(await(0,l.A)(e)).status&&c.Ay.success("OTP resent successfully")},style:{marginBottom:"20px",color:"#007bff",background:"none",border:"none",cursor:"pointer"},children:"Resend OTP"})}),(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)("button",{className:"btn btn-secondary",onClick:()=>w(!1),style:{marginRight:"10px"},children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary",onClick:async()=>{try{if(!P)return void c.Ay.error("Please enter OTP");const e={url:"/smsverifyotp",method:"post",baseURL:"https://majesticmall.net/api/user",headers:{"Content-Type":"application/json"},data:{mobile:k.mobile,otp:P,...k,status:"Approved"}};200===(await(0,l.A)(e)).status&&(localStorage.removeItem("registrationFormData"),c.Ay.success("Registration successful!"),w(!1),_(null),window.location.assign("/login"))}catch(n){var e,s;if(console.error(n),400===(null===(e=n.response)||void 0===e?void 0:e.status))c.Ay.error(n.response.data.error);else if(404===(null===(s=n.response)||void 0===s?void 0:s.status))c.Ay.error("User not found. Please try again.");else{var a,t;c.Ay.error((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"An error occurred during verification. Please try again.")}}},children:"Verify"})]})]})}),(0,m.jsx)(n.N9,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}},54737:()=>{}}]);
//# sourceMappingURL=2380.76462842.chunk.js.map