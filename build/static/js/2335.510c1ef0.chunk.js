"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[2335],{2335:(e,n,a)=>{a.r(n),a.d(n,{default:()=>B});var t=a(65043),r=a(23927),l=a(46909),i=a(59748),s=a(22019),d=a(3188),o=a(49757),c=a(6036),p=a(27210),y=a(67407),u=a(75337),m=a(9855),h=a(86213),x=a(1880),A=a(86111),g=a.n(A),b=a(70579);const{Title:j}=r.A,f="https://majesticmall.net/api/admin",{confirm:C}=l.A,B=()=>{const[e,n]=(0,t.useState)([]),[a,r]=(0,t.useState)(!1),[A,B]=(0,t.useState)(!1),[k,T]=(0,t.useState)(null),[v]=i.A.useForm(),[F]=i.A.useForm(),w=x.A.get("token"),$=w?g().AES.decrypt(w,"Abhinanadan02").toString(g().enc.Utf8):null;(0,t.useEffect)((()=>{I()}),[]);const I=async()=>{try{const e=await h.A.get(`${f}/getallbanner`,{headers:{Authorization:`Bearer ${$}`}});n(e.data.banner)}catch(e){s.Ay.error("Failed to fetch banners")}},S=e=>{C({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){(async e=>{try{await h.A.post(`${f}/deletebanner/${e}`,{},{headers:{Authorization:`Bearer ${$}`}}),s.Ay.success("Banner deleted successfully"),I()}catch(n){s.Ay.error("Failed to delete banner")}})(e)},onCancel(){}})},z=[{title:"Serial No.",dataIndex:"serialNo",key:"serialNo"},{title:"Title",dataIndex:"type",key:"type"},{title:"Banner",dataIndex:"banner",key:"banner",render:e=>(0,b.jsx)("img",{src:`https://majesticmall.net/image/${e}`,alt:"Banner",style:{width:100},loading:"lazy",onError:e=>{e.target.src="../img/example.jpg"}})},{title:"Action",key:"action",render:(e,n)=>(0,b.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,b.jsx)(d.Ay,{type:"text",icon:(0,b.jsx)(y.A,{}),onClick:()=>{return T(e=n),F.setFieldsValue({type:e.type}),void B(!0);var e}}),(0,b.jsx)(d.Ay,{type:"text",icon:(0,b.jsx)(m.A,{color:"red"}),onClick:()=>S(n._id)})]})}],_=e.map(((e,n)=>({key:e._id,serialNo:n+1,type:e.type,banner:e.banner,_id:e._id})));return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,b.jsx)(j,{level:3,className:"title",children:"Banners"}),(0,b.jsx)(d.Ay,{type:"primary",icon:(0,b.jsx)(u.A,{}),onClick:()=>r(!0),children:"Add Banner"})]}),(0,b.jsx)(o.A,{columns:z,dataSource:_,pagination:{pageSize:10},scroll:{x:"max-content"},components:{header:{cell:e=>(0,b.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#5C870C,#5C870C,#5C870C)",color:"white"}})}}}),(0,b.jsx)(l.A,{title:"Add Banner",visible:a,onCancel:()=>r(!1),footer:null,children:(0,b.jsxs)(i.A,{form:v,onFinish:async e=>{try{const n=new FormData;n.append("banner",e.banner.file),n.append("type",e.type),console.log("adinggggggggggggggg",e.banner.file),await h.A.post(`${f}/addbanner`,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${$}`}}),s.Ay.success("Banner added successfully"),r(!1),v.resetFields(),I()}catch(n){s.Ay.error("Failed to add banner")}},layout:"vertical",children:[(0,b.jsx)(i.A.Item,{name:"banner",label:"Banner Image (Size: 1392*522 Pixels)",rules:[{required:!0,message:"Please upload a banner image"}],children:(0,b.jsx)(c.A,{accept:"image/*",listType:"picture-card",maxCount:1,beforeUpload:()=>!1,children:(0,b.jsxs)("div",{children:[(0,b.jsx)(u.A,{}),(0,b.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,b.jsx)(i.A.Item,{name:"type",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,b.jsx)(p.A,{})}),(0,b.jsx)(i.A.Item,{children:(0,b.jsx)(d.Ay,{type:"primary",htmlType:"submit",children:"Add Banner"})})]})}),(0,b.jsx)(l.A,{title:"Edit Banner",visible:A,onCancel:()=>B(!1),footer:null,children:(0,b.jsxs)(i.A,{form:F,onFinish:async e=>{try{const n=new FormData;e.banner&&e.banner.file&&n.append("banner",e.banner.file),n.append("type",e.type),console.log("bannerrrrrrrrrrrrr",e.banner.file),await h.A.put(`${f}/updatebanner/${k._id}`,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${$}`}}),s.Ay.success("Banner updated successfully"),B(!1),F.resetFields(),I()}catch(n){s.Ay.error("Failed to update banner")}},layout:"vertical",children:[(0,b.jsx)(i.A.Item,{name:"banner",label:"Banner Image (Size: 1392*522 Pixels)",children:(0,b.jsx)(c.A,{accept:"image/*",listType:"picture-card",maxCount:1,beforeUpload:()=>!1,defaultFileList:k?[{uid:"-1",name:"current-banner",status:"done",url:`https://majesticmall.net/image/${k.banner}`}]:[],children:(0,b.jsxs)("div",{children:[(0,b.jsx)(u.A,{}),(0,b.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,b.jsx)(i.A.Item,{name:"type",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,b.jsx)(p.A,{})}),(0,b.jsx)(i.A.Item,{children:(0,b.jsx)(d.Ay,{type:"primary",htmlType:"submit",children:"Update Banner"})})]})})]})}}}]);
//# sourceMappingURL=2335.510c1ef0.chunk.js.map