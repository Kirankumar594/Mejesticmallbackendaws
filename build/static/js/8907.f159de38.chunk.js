"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[8907],{28907:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var i=r(65043),a=r(23927),s=r(46909),n=r(59748),l=r(22019),c=r(6051),d=r(3188),o=r(27210),h=r(49757),u=r(67407),m=r(61966),y=r(62058),v=r(75337),A=r(86213),p=r(11238),g=r(1457),x=r(1880),j=r(86111),f=r.n(j),C=r(70579);const{Title:k}=a.A,{confirm:b}=s.A,w=()=>{const[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[j,w]=(0,i.useState)(""),[_,D]=(0,i.useState)(!1),[I,K]=(0,i.useState)(null),[S]=n.A.useForm(),P=x.A.get("token"),z=P?f().AES.decrypt(P,"Abhinanadan02").toString(f().enc.Utf8):null;(0,i.useEffect)((()=>{F()}),[]);const F=async()=>{try{const i=await A.A.get("https://majesticmall.net/api/admin/getalldeliverycharges",{headers:{Authorization:`Bearer ${z}`}});var e,r;if(200===i.status)t(null===(e=i.data)||void 0===e?void 0:e.deliveryCharges),a(null===(r=i.data)||void 0===r?void 0:r.deliveryCharges)}catch(i){console.error("Error fetching delivery charges:",i),l.Ay.error("Failed to fetch delivery charges")}},$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;K(e),e?S.setFieldsValue({...e}):S.resetFields(),D(!0)},E=()=>{D(!1),K(null),S.resetFields()},B=async e=>{try{200===(await A.A.delete(`https://majesticmall.net/api/admin/deletedeliverycharges/${e}`,{headers:{Authorization:`Bearer ${z}`}})).status&&(l.Ay.success("Delivery charges deleted successfully"),F())}catch(t){l.Ay.error("Failed to delete delivery charges")}},M=[{title:"Minimum Amount (\u20b9)",dataIndex:"minAmount",key:"minAmount"},{title:"Delivery Charges (\u20b9)",dataIndex:"deliveryCharges",key:"deliveryCharges"},{title:"Minimum Distance Km",dataIndex:"minKm",key:"minKm"},{title:"Per Km Charges (\u20b9)",dataIndex:"perKmPrice",key:"perKmPrice"},{title:"Action",key:"action",render:(e,t)=>(0,C.jsxs)(c.A,{children:[(0,C.jsx)(d.Ay,{icon:(0,C.jsx)(u.A,{}),onClick:()=>$(t)}),(0,C.jsx)(d.Ay,{icon:(0,C.jsx)(m.A,{}),onClick:()=>{return e=t._id,void b({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){B(e)},onCancel(){}});var e},style:{marginLeft:8}}),(0,C.jsx)(d.Ay,{type:!0===t.isActive?"primary":"danger",onClick:()=>(async e=>{try{const t={url:`/admin/activedeactivedeliverymake/${e}`,method:"put",baseURL:"https://majesticmall.net/api",hearder:{"content-type":"application/json"},headers:{Authorization:`Bearer ${z}`}};200===(await(0,A.A)(t)).status&&(l.Ay.success("Successfully Updated"),F())}catch(t){l.Ay.error("Failed to update")}})(null===t||void 0===t?void 0:t._id),children:!0===t.isActive?"Active":"Inactive"})]})}];return(0,C.jsxs)("div",{style:{padding:24},children:[(0,C.jsxs)("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,C.jsx)(k,{level:3,children:"Delivery Charges Management"}),(0,C.jsxs)(c.A,{children:[(0,C.jsx)(o.A,{placeholder:"Search delivery charges",onChange:t=>(t=>{w(t);const r=e.filter((e=>Object.values(e).some((e=>null===e||void 0===e?void 0:e.toString().toLowerCase().includes(t.toLowerCase())))));a(r)})(t.target.value),prefix:(0,C.jsx)(y.A,{}),style:{width:200}}),(0,C.jsx)(d.Ay,{type:"primary",onClick:()=>{const e=r.map((e=>{let{_id:t,__v:r,...i}=e;return i})),t=p.Wp.json_to_sheet(e),i=p.Wp.book_new();p.Wp.book_append_sheet(i,t,"Delivery Charges"),p._h(i,"DeliveryCharges.xlsx")},icon:(0,C.jsx)(g.A,{size:16}),children:"Export to Excel"}),(0,C.jsx)(d.Ay,{type:"primary",icon:(0,C.jsx)(v.A,{}),onClick:()=>$(),children:"Add Delivery Charges"})]})]}),(0,C.jsx)(h.A,{columns:M,dataSource:r,rowKey:"_id"}),(0,C.jsx)(s.A,{title:I?"Edit Delivery Charges":"Add Delivery Charges",visible:_,onCancel:E,footer:null,children:(0,C.jsxs)(n.A,{form:S,onFinish:async e=>{try{let t;t=I?await A.A.post(`https://majesticmall.net/api/admin/editdeliverycharges/${I._id}`,e,{headers:{Authorization:`Bearer ${z}`}}):await A.A.post("https://majesticmall.net/api/admin/adddeliverycharges",e,{headers:{Authorization:`Bearer ${z}`}}),200===t.status&&(l.Ay.success(`Delivery charges ${I?"updated":"added"} successfully`),F(),E())}catch(t){console.error("Error saving delivery charges:",t),l.Ay.error("Failed to save delivery charges")}},layout:"vertical",children:[(0,C.jsx)(n.A.Item,{name:"minAmount",label:"Minimum Amount (\u20b9)",rules:[{required:!0,message:"Please input the minimum amount!"}],children:(0,C.jsx)(o.A,{type:"number"})}),(0,C.jsx)(n.A.Item,{name:"deliveryCharges",label:"Delivery Charges (\u20b9)",rules:[{required:!0,message:"Please input the delivery charges!"}],children:(0,C.jsx)(o.A,{type:"number"})}),(0,C.jsx)(n.A.Item,{name:"minKm",label:"Minimum Distance (Km)",rules:[{required:!0,message:"Please input minumum distance kilometer!"}],children:(0,C.jsx)(o.A,{type:"number"})}),(0,C.jsx)(n.A.Item,{name:"perKmPrice",label:"Per Km Price (\u20b9)",rules:[{required:!0,message:"Please input the price per kilometer!"}],children:(0,C.jsx)(o.A,{type:"number"})}),(0,C.jsx)(n.A.Item,{children:(0,C.jsxs)(d.Ay,{type:"primary",htmlType:"submit",children:[I?"Update":"Add"," Delivery Charges"]})})]})})]})}},61966:(e,t,r)=>{r.d(t,{A:()=>c});var i=r(58168),a=r(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var n=r(22172),l=function(e,t){return a.createElement(n.A,(0,i.A)({},e,{ref:t,icon:s}))};const c=a.forwardRef(l)}}]);
//# sourceMappingURL=8907.f159de38.chunk.js.map