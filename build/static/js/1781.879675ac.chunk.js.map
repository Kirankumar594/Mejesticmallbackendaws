{"version":3,"file":"static/js/1781.879675ac.chunk.js","mappings":"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","sources":["components/admin/pages/AddTag.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Table, Modal, message, Space, Typography } from 'antd';\r\nimport { PlusOutlined, SearchOutlined } from '@ant-design/icons';\r\nimport { Trash2, Edit, FileSpreadsheet } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\nimport Cookies from 'js-cookie';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst { confirm } = Modal;\r\nconst API_BASE_URL = 'https://majesticmall.net/api/admin';\r\nconst { Title } = Typography;\r\n\r\nconst AddTag = () => {\r\n  const encryptionKey = process.env.REACT_APP_ENCRYPTION_KEY;\r\n  const encryptedToken = Cookies.get('token');\r\n  const token = encryptedToken ? CryptoJS.AES.decrypt(encryptedToken, encryptionKey).toString(CryptoJS.enc.Utf8) : null;\r\n\r\n  const [tags, setTags] = useState([]);\r\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\r\n  const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n  const [editingTag, setEditingTag] = useState(null);\r\n  const [form] = Form.useForm();\r\n  const [searchText, setSearchText] = useState('');\r\n  const [filteredTags, setFilteredTags] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredTags(\r\n      tags.filter((tag) =>\r\n        Object.values(tag).some(\r\n          (val) => val && val.toString().toLowerCase().includes(searchText.toLowerCase())\r\n        )\r\n      )\r\n    );\r\n  }, [tags, searchText]);\r\n\r\n  const fetchTags = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/getTag`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      setTags(response.data?.Tag || []);\r\n    } catch (error) {\r\n      message.error('Failed to fetch tags');\r\n    }\r\n  };\r\n  const showDeleteConfirm = (id) => {\r\n    confirm({\r\n      title: \"Are you sure you want to delete?\",\r\n      content: \"This action cannot be undone.\",\r\n      okText: \"Yes\",\r\n      okType: \"danger\",\r\n      cancelText: \"No\",\r\n      onOk() {\r\n        handleDeleteTag(id);\r\n      },\r\n      onCancel() {\r\n        // console.log(\"Deletion cancelled\");\r\n      },\r\n    });\r\n  };\r\n  const handleAddTag = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/addTag`, {\r\n        tag: values.tag\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Tag added successfully');\r\n      setIsAddModalVisible(false);\r\n      form.resetFields();\r\n      fetchTags();\r\n    } catch (error) {\r\n      message.error('Failed to add tag');\r\n    }\r\n  };\r\n\r\n  const handleEditTag = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/editTag/${editingTag._id}`, {\r\n        tag: values.tag\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Tag updated successfully');\r\n      setIsEditModalVisible(false);\r\n      form.resetFields();\r\n      fetchTags();\r\n    } catch (error) {\r\n      message.error('Failed to update tag');\r\n    }\r\n  };\r\n\r\n  const handleDeleteTag = async (id) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/deletetag/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      message.success('Tag deleted successfully');\r\n      fetchTags();\r\n    } catch (error) {\r\n      message.error('Failed to delete tag');\r\n    }\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    const dataToExport = filteredTags.map(({ _id, tag }) => ({\r\n      'Tag': tag,\r\n    }));\r\n    const worksheet = XLSX.utils.json_to_sheet(dataToExport);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Tags');\r\n    XLSX.writeFile(workbook, 'tags.xlsx');\r\n  };\r\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10 });\r\n\r\n\r\n  const handleTableChange = (newPagination) => {\r\n    setPagination(newPagination);\r\n  };\r\n  const columns = [\r\n    {\r\n      title: \"Serial No.\",\r\n      key: \"serialNo\",\r\n      render: (_, __, index) => (pagination.current - 1) * pagination.pageSize + index + 1,\r\n    },\r\n    {\r\n      title: 'Tag',\r\n      dataIndex: 'tag',\r\n      key: 'tag',\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Edit color=\"blue\" />}\r\n            onClick={() => {\r\n              setEditingTag(record);\r\n              setIsEditModalVisible(true);\r\n              form.setFieldsValue({ tag: record.tag });\r\n            }}\r\n          />\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Trash2 color=\"red\" />}\r\n            onClick={() => showDeleteConfirm(record._id)}\r\n          />\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 16 }}>\r\n        <Title level={3} className=\"title\">Tags</Title>\r\n        <Space>\r\n          <Input\r\n            placeholder=\"Search tags\"\r\n            prefix={<SearchOutlined />}\r\n            value={searchText}\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n          />\r\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={() => setIsAddModalVisible(true)}>\r\n            Add Tag\r\n          </Button>\r\n          <Button type=\"primary\" icon={<FileSpreadsheet size={16} />} onClick={exportToExcel}>Export to Excel</Button>\r\n        </Space>\r\n      </div>\r\n\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredTags}\r\n        rowKey=\"_id\"\r\n        scroll={{ x: \"max-content\" }}\r\n        pagination={{\r\n          ...pagination,\r\n          onChange: (page, pageSize) => handleTableChange({ current: page, pageSize }),\r\n        }}\r\n        components={{\r\n          header: {\r\n            cell: (props) => (\r\n              <th\r\n                {...props}\r\n                style={{\r\n                  ...props.style,\r\n                  background: \"linear-gradient(#000,#000,#000)\",\r\n                  color: \"white\",\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        }}\r\n      />\r\n\r\n      <Modal\r\n        tag=\"Add Tag\"\r\n        visible={isAddModalVisible}\r\n        onCancel={() => setIsAddModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleAddTag} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"tag\"\r\n            label=\"Tag\"\r\n            rules={[{ required: true, message: 'Please enter a tag' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Add Tag\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <Modal\r\n        tag=\"Edit Tag\"\r\n        visible={isEditModalVisible}\r\n        onCancel={() => setIsEditModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleEditTag} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"tag\"\r\n            label=\"Tag\"\r\n            rules={[{ required: true, message: 'Please enter a tag' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Update Tag\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTag;"],"names":["confirm","Modal","API_BASE_URL","Title","Typography","AddTag","encryptedToken","Cookies","get","token","CryptoJS","decrypt","process","toString","Utf8","tags","setTags","useState","isAddModalVisible","setIsAddModalVisible","isEditModalVisible","setIsEditModalVisible","editingTag","setEditingTag","form","Form","useForm","searchText","setSearchText","filteredTags","setFilteredTags","useEffect","fetchTags","filter","tag","Object","values","some","val","toLowerCase","includes","async","_response$data","response","axios","headers","Authorization","data","Tag","error","message","handleDeleteTag","delete","id","success","pagination","setPagination","current","pageSize","columns","title","key","render","_","__","index","dataIndex","record","_jsxs","Space","children","_jsx","Button","type","icon","Edit","color","onClick","setFieldsValue","Trash2","showDeleteConfirm","_id","content","okText","okType","cancelText","onOk","onCancel","style","display","justifyContent","marginBottom","level","className","Input","placeholder","prefix","SearchOutlined","value","onChange","e","target","PlusOutlined","FileSpreadsheet","size","exportToExcel","dataToExport","map","_ref","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","Table","dataSource","rowKey","scroll","x","page","components","header","cell","props","background","visible","footer","onFinish","post","resetFields","layout","Item","name","label","rules","required","htmlType"],"sourceRoot":""}