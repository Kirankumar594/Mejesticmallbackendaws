{"version":3,"file":"static/js/6595.cebe18a6.chunk.js","mappings":"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","sources":["components/admin/pages/AddUnit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Table, Modal, message, Space, Typography } from 'antd';\r\nimport { PlusOutlined, SearchOutlined } from '@ant-design/icons';\r\nimport { Trash2, Edit, FileSpreadsheet } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\nimport Cookies from 'js-cookie';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst API_BASE_URL = 'https://majesticmall.net/api/admin';\r\nconst { Title } = Typography;\r\nconst { confirm } = Modal;\r\nconst AddUnit = () => {\r\n  const encryptionKey = process.env.REACT_APP_ENCRYPTION_KEY;\r\n  const encryptedToken = Cookies.get('token');\r\n  const token = encryptedToken ? CryptoJS.AES.decrypt(encryptedToken, encryptionKey).toString(CryptoJS.enc.Utf8) : null;\r\n\r\n  const [units, setUnits] = useState([]);\r\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\r\n  const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n  const [editingUnit, setEditingUnit] = useState(null);\r\n  const [form] = Form.useForm();\r\n  const [searchText, setSearchText] = useState('');\r\n  const [filteredUnits, setFilteredUnits] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchUnits();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredUnits(\r\n      units.filter((unit) =>\r\n        Object.values(unit).some(\r\n          (val) => val && val.toString().toLowerCase().includes(searchText.toLowerCase())\r\n        )\r\n      )\r\n    );\r\n  }, [units, searchText]);\r\n\r\n  const fetchUnits = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/getUnit`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      setUnits(response.data?.Unit || []);\r\n    } catch (error) {\r\n      message.error('Failed to fetch units');\r\n    }\r\n  };\r\n\r\n  const handleAddUnit = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/addUnit`, {\r\n        unit: values.unit\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Unit added successfully');\r\n      setIsAddModalVisible(false);\r\n      form.resetFields();\r\n      fetchUnits();\r\n    } catch (error) {\r\n      message.error('Failed to add unit');\r\n    }\r\n  };\r\n\r\n  const handleEditUnit = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/editUnit/${editingUnit._id}`, {\r\n        unit: values.unit\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Unit updated successfully');\r\n      setIsEditModalVisible(false);\r\n      form.resetFields();\r\n      fetchUnits();\r\n    } catch (error) {\r\n      message.error('Failed to update unit');\r\n    }\r\n  };\r\n  const showDeleteConfirm = (id) => {\r\n    confirm({\r\n      title: \"Are you sure you want to delete?\",\r\n      content: \"This action cannot be undone.\",\r\n      okText: \"Yes\",\r\n      okType: \"danger\",\r\n      cancelText: \"No\",\r\n      onOk() {\r\n        handleDeleteUnit(id);\r\n      },\r\n      onCancel() {\r\n        // console.log(\"Deletion cancelled\");\r\n      },\r\n    });\r\n  };\r\n  const handleDeleteUnit = async (id) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/deleteunit/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      message.success('Unit deleted successfully');\r\n      fetchUnits();\r\n    } catch (error) {\r\n      message.error('Failed to delete unit');\r\n    }\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    const dataToExport = filteredUnits.map(({ _id, unit }) => ({\r\n      'Unit': unit,\r\n    }));\r\n    const worksheet = XLSX.utils.json_to_sheet(dataToExport);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Units');\r\n    XLSX.writeFile(workbook, 'units.xlsx');\r\n  };\r\n\r\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10 });\r\n\r\n\r\n  const handleTableChange = (newPagination) => {\r\n    setPagination(newPagination);\r\n  };\r\n  const columns = [\r\n    {\r\n      title: \"Serial No.\",\r\n      key: \"serialNo\",\r\n      render: (_, __, index) => (pagination.current - 1) * pagination.pageSize + index + 1,\r\n    },\r\n    {\r\n      title: 'Unit',\r\n      dataIndex: 'unit',\r\n      key: 'unit',\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Edit color=\"blue\" />}\r\n            onClick={() => {\r\n              setEditingUnit(record);\r\n              setIsEditModalVisible(true);\r\n              form.setFieldsValue({ unit: record.unit });\r\n            }}\r\n          />\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Trash2 color=\"red\" />}\r\n            onClick={() => showDeleteConfirm(record._id)}\r\n          />\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 16 }}>\r\n        <Title level={3} className=\"title\">Units</Title>\r\n        <Space>\r\n          <Input\r\n            placeholder=\"Search units\"\r\n            prefix={<SearchOutlined />}\r\n            value={searchText}\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n          />\r\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={() => setIsAddModalVisible(true)}>\r\n            Add Unit\r\n          </Button>\r\n          <Button type=\"primary\" icon={<FileSpreadsheet size={16} />} onClick={exportToExcel}>Export to Excel</Button>\r\n        </Space>\r\n      </div>\r\n\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredUnits}\r\n        rowKey=\"_id\"\r\n        pagination={{\r\n          ...pagination,\r\n          onChange: (page, pageSize) => handleTableChange({ current: page, pageSize }),\r\n        }}\r\n        scroll={{ x: \"max-content\" }}\r\n        components={{\r\n          header: {\r\n            cell: (props) => (\r\n              <th\r\n                {...props}\r\n                style={{\r\n                  ...props.style,\r\n                  background: \"linear-gradient(#000,#000,#000)\",\r\n                  color: \"white\",\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        }}\r\n      />\r\n\r\n      <Modal\r\n        unit=\"Add Unit\"\r\n        visible={isAddModalVisible}\r\n        onCancel={() => setIsAddModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleAddUnit} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"unit\"\r\n            label=\"Unit\"\r\n            rules={[{ required: true, message: 'Please enter a unit' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Add Unit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <Modal\r\n        unit=\"Edit Unit\"\r\n        visible={isEditModalVisible}\r\n        onCancel={() => setIsEditModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleEditUnit} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"unit\"\r\n            label=\"Unit\"\r\n            rules={[{ required: true, message: 'Please enter a unit' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Update Unit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddUnit;"],"names":["API_BASE_URL","Title","Typography","confirm","Modal","AddUnit","encryptedToken","Cookies","get","token","CryptoJS","decrypt","process","toString","Utf8","units","setUnits","useState","isAddModalVisible","setIsAddModalVisible","isEditModalVisible","setIsEditModalVisible","editingUnit","setEditingUnit","form","Form","useForm","searchText","setSearchText","filteredUnits","setFilteredUnits","useEffect","fetchUnits","filter","unit","Object","values","some","val","toLowerCase","includes","async","_response$data","response","axios","headers","Authorization","data","Unit","error","message","handleDeleteUnit","delete","id","success","pagination","setPagination","current","pageSize","columns","title","key","render","_","__","index","dataIndex","record","_jsxs","Space","children","_jsx","Button","type","icon","Edit","color","onClick","setFieldsValue","Trash2","showDeleteConfirm","_id","content","okText","okType","cancelText","onOk","onCancel","style","display","justifyContent","marginBottom","level","className","Input","placeholder","prefix","SearchOutlined","value","onChange","e","target","PlusOutlined","FileSpreadsheet","size","exportToExcel","dataToExport","map","_ref","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","Table","dataSource","rowKey","page","scroll","x","components","header","cell","props","background","visible","footer","onFinish","post","resetFields","layout","Item","name","label","rules","required","htmlType"],"sourceRoot":""}