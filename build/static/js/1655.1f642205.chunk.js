"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[1655],{81655:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(65043),n=a(23927),i=a(22019),d=(a(46909),a(6051)),l=a(3188),o=a(27210),r=a(97107),c=a(49757),u=(a(39470),a(62058)),h=a(86213),m=a(11238),p=a(86178),x=a.n(p),A=a(78745),g=a(1457),f=a(1880),w=a(86111),k=a.n(w),b=a(70579);const y="https://majesticmall.net/api",{Title:v}=n.A,S=()=>{const e=f.A.get("token"),t=e?k().AES.decrypt(e,"Abhinanadan02").toString(k().enc.Utf8):null,[a,n]=(0,s.useState)([]),[p,w]=(0,s.useState)([]),[S,j]=(0,s.useState)(""),[I,C]=(0,s.useState)([null,null]),[_,D]=(0,s.useState)(!1);(0,s.useEffect)((()=>{z()}),[]),(0,s.useEffect)((()=>{a.length>0&&E()}),[a,S,I]);const z=async()=>{D(!0);try{const e=await h.A.get(`${y}/user/getAllUser`,{headers:{Authorization:`Bearer ${t}`}});200===e.status&&(n(e.data.success),w(B(e.data.success)))}catch(e){i.Ay.error("Failed to fetch customers")}finally{D(!1)}},B=e=>e.map(((e,a)=>({key:e._id,Sno:a+1,ID:e._id,name:e.name,email:e.email,mobile:e.mobile,Amobile:e.Amobile,houseno:e.Houseno,address1:e.address1,address2:e.address2,landmark:e.landmark,pincode:e.pincode,Status:e.status,RegisteredDate:x()(e.createdAt).format("DD/MM/YYYY"),Date:e.createdAt,action:(0,b.jsx)(d.A,{children:(0,b.jsx)(l.Ay,{type:"Approved"===e.status?"primary":"danger",onClick:()=>(async(e,a)=>{D(!0);try{const s="block"===a?"changeBlockStatus":"changeunBlockStatus";200===(await h.A.get(`${y}/user/${s}/${e}`,{headers:{Authorization:`Bearer ${t}`}})).status&&(A.oR.success(`User ${"block"===a?"blocked":"unblocked"} successfully`),z())}catch(s){A.oR.error("Failed to change user status")}finally{D(!1)}})(e._id,"Approved"===e.status?"block":"unblock"),children:"Approved"===e.status?"Block":"Unblock"})})}))),E=()=>{let e=a;S&&(e=e.filter((e=>Object.values(e).some((e=>e&&"string"===typeof e&&e.toLowerCase().includes(S.toLowerCase())))))),0===e.length&&i.Ay.warning("No customers found with the applied filters."),w(e)};return(0,b.jsxs)("div",{children:[(0,b.jsx)(A.N9,{}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,b.jsx)(v,{level:3,className:"title",children:"Customers"}),(0,b.jsxs)(d.A,{children:[(0,b.jsx)(o.A,{placeholder:"Search customers",prefix:(0,b.jsx)(u.A,{}),value:S,onChange:e=>{return t=e.target.value,void j(t);var t},style:{width:200}}),(0,b.jsx)(r.A.RangePicker,{value:I,onChange:e=>{C(e)}}),(0,b.jsx)(l.Ay,{type:"primary",onClick:()=>{const e=p.map((e=>{let{action:t,...a}=e;return a})),t=m.Wp.json_to_sheet(e),a=m.Wp.book_new();m.Wp.book_append_sheet(a,t,"Customers"),m._h(a,"customers.xlsx")},icon:(0,b.jsx)(g.A,{size:16}),children:"Export to Excel"})]})]}),(0,b.jsx)(c.A,{columns:[{title:"SNo",dataIndex:"Sno",width:80},{title:"CustomerID",dataIndex:"ID",width:150},{title:"Name",dataIndex:"name",width:150},{title:"Email",dataIndex:"email",width:200},{title:"Mobile",dataIndex:"mobile",width:150},{title:"Alternative Mobile",dataIndex:"Amobile",width:150},{title:"House No",dataIndex:"houseno",width:120},{title:"Address 1",dataIndex:"address1",width:200},{title:"Address 2",dataIndex:"address2",width:200},{title:"Landmark",dataIndex:"landmark",width:150},{title:"Pincode",dataIndex:"pincode",width:120},{title:"Status",dataIndex:"Status",width:120},{title:"Registered Date",dataIndex:"RegisteredDate",width:150},{title:"Action",dataIndex:"action",width:200}],dataSource:p,scroll:{x:"max-content"},pagination:{pageSize:10},components:{header:{cell:e=>(0,b.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}},loading:_})]})}},39470:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(58168),n=a(65043);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var d=a(22172),l=function(e,t){return n.createElement(d.A,(0,s.A)({},e,{ref:t,icon:i}))};const o=n.forwardRef(l)}}]);
//# sourceMappingURL=1655.1f642205.chunk.js.map