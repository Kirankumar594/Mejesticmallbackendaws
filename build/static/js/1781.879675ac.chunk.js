"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[1781],{71781:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(65043),r=a(46909),n=a(23927),l=a(59748),i=a(22019),o=a(6051),c=a(3188),d=a(27210),u=a(49757),g=a(62058),y=a(75337),A=a(26533),h=a(9855),p=a(1457),x=a(86213),j=a(11238),m=a(1880),T=a(86111),f=a.n(T),k=a(70579);const{confirm:b}=r.A,v="https://majesticmall.net/api/admin",{Title:S}=n.A,C=()=>{const e=m.A.get("token"),t=e?f().AES.decrypt(e,"Abhinanadan02").toString(f().enc.Utf8):null,[a,n]=(0,s.useState)([]),[T,C]=(0,s.useState)(!1),[w,_]=(0,s.useState)(!1),[F,$]=(0,s.useState)(null),[z]=l.A.useForm(),[E,B]=(0,s.useState)(""),[I,N]=(0,s.useState)([]);(0,s.useEffect)((()=>{W()}),[]),(0,s.useEffect)((()=>{N(a.filter((e=>Object.values(e).some((e=>e&&e.toString().toLowerCase().includes(E.toLowerCase()))))))}),[a,E]);const W=async()=>{try{var e;const a=await x.A.get(`${v}/getTag`,{headers:{Authorization:`Bearer ${t}`}});n((null===(e=a.data)||void 0===e?void 0:e.Tag)||[])}catch(a){i.Ay.error("Failed to fetch tags")}},q=async e=>{try{await x.A.delete(`${v}/deletetag/${e}`,{headers:{Authorization:`Bearer ${t}`}}),i.Ay.success("Tag deleted successfully"),W()}catch(a){i.Ay.error("Failed to delete tag")}},[L,O]=(0,s.useState)({current:1,pageSize:10}),P=[{title:"Serial No.",key:"serialNo",render:(e,t,a)=>(L.current-1)*L.pageSize+a+1},{title:"Tag",dataIndex:"tag",key:"tag"},{title:"Action",key:"action",render:(e,t)=>(0,k.jsxs)(o.A,{children:[(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(A.A,{color:"blue"}),onClick:()=>{$(t),_(!0),z.setFieldsValue({tag:t.tag})}}),(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(h.A,{color:"red"}),onClick:()=>{return e=t._id,void b({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){q(e)},onCancel(){}});var e}})]})}];return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,k.jsx)(S,{level:3,className:"title",children:"Tags"}),(0,k.jsxs)(o.A,{children:[(0,k.jsx)(d.A,{placeholder:"Search tags",prefix:(0,k.jsx)(g.A,{}),value:E,onChange:e=>B(e.target.value)}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(y.A,{}),onClick:()=>C(!0),children:"Add Tag"}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(p.A,{size:16}),onClick:()=>{const e=I.map((e=>{let{_id:t,tag:a}=e;return{Tag:a}})),t=j.Wp.json_to_sheet(e),a=j.Wp.book_new();j.Wp.book_append_sheet(a,t,"Tags"),j._h(a,"tags.xlsx")},children:"Export to Excel"})]})]}),(0,k.jsx)(u.A,{columns:P,dataSource:I,rowKey:"_id",scroll:{x:"max-content"},pagination:{...L,onChange:(e,t)=>{O({current:e,pageSize:t})}},components:{header:{cell:e=>(0,k.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}}),(0,k.jsx)(r.A,{tag:"Add Tag",visible:T,onCancel:()=>C(!1),footer:null,children:(0,k.jsxs)(l.A,{form:z,onFinish:async e=>{try{await x.A.post(`${v}/addTag`,{tag:e.tag},{headers:{Authorization:`Bearer ${t}`}}),i.Ay.success("Tag added successfully"),C(!1),z.resetFields(),W()}catch(a){i.Ay.error("Failed to add tag")}},layout:"vertical",children:[(0,k.jsx)(l.A.Item,{name:"tag",label:"Tag",rules:[{required:!0,message:"Please enter a tag"}],children:(0,k.jsx)(d.A,{})}),(0,k.jsx)(l.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Add Tag"})})]})}),(0,k.jsx)(r.A,{tag:"Edit Tag",visible:w,onCancel:()=>_(!1),footer:null,children:(0,k.jsxs)(l.A,{form:z,onFinish:async e=>{try{await x.A.post(`${v}/editTag/${F._id}`,{tag:e.tag},{headers:{Authorization:`Bearer ${t}`}}),i.Ay.success("Tag updated successfully"),_(!1),z.resetFields(),W()}catch(a){i.Ay.error("Failed to update tag")}},layout:"vertical",children:[(0,k.jsx)(l.A.Item,{name:"tag",label:"Tag",rules:[{required:!0,message:"Please enter a tag"}],children:(0,k.jsx)(d.A,{})}),(0,k.jsx)(l.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Update Tag"})})]})})]})}}}]);
//# sourceMappingURL=1781.879675ac.chunk.js.map