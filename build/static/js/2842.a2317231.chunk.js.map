{"version":3,"file":"static/js/2842.a2317231.chunk.js","mappings":"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","sources":["components/admin/pages/joinclubbanner.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Upload, Button, Table, Modal, message, Typography } from 'antd';\r\nimport { PlusOutlined, UploadOutlined } from '@ant-design/icons';\r\nimport { Trash2 } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst { Title } = Typography;\r\nconst API_BASE_URL = 'https://majesticmall.net/api/admin';\r\nconst { confirm } = Modal;\r\n\r\nconst AddClubBanner = () => {\r\n  const encryptionKey = process.env.REACT_APP_ENCRYPTION_KEY;\r\n  const encryptedToken = Cookies.get('token');\r\n  const token = encryptedToken ? CryptoJS.AES.decrypt(encryptedToken, encryptionKey).toString(CryptoJS.enc.Utf8) : null;\r\n  const [clubBanners, setClubBanners] = useState([]);\r\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    fetchClubBanners();\r\n  }, []);\r\n\r\n  const fetchClubBanners = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/getallclubbanner`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      setClubBanners(response.data.clubbanner);\r\n    } catch (error) {\r\n      message.error('Failed to fetch club banners');\r\n    }\r\n  };\r\n\r\n  const handleAddClubBanner = async (values) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('clubbanner', values.clubbanner.file);\r\n      formData.append('type', values.type);\r\n\r\n      await axios.post(`${API_BASE_URL}/addclubbanner`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }, headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Club banner added successfully');\r\n      setIsAddModalVisible(false);\r\n      form.resetFields();\r\n      fetchClubBanners();\r\n    } catch (error) {\r\n      message.error('Failed to add club banner');\r\n    }\r\n  };\r\n  const showDeleteConfirm = (id) => {\r\n    confirm({\r\n      title: \"Are you sure you want to delete?\",\r\n      content: \"This action cannot be undone.\",\r\n      okText: \"Yes\",\r\n      okType: \"danger\",\r\n      cancelText: \"No\",\r\n      onOk() {\r\n        handleDeleteClubBanner(id);\r\n      },\r\n      onCancel() {\r\n        console.log(\"Deletion cancelled\");\r\n      },\r\n    });\r\n  };\r\n  const handleDeleteClubBanner = async (id) => {\r\n    try {\r\n      await axios.post(\r\n        `${API_BASE_URL}/deleteclubbanner/${id}`,\r\n        null, // No body needed for a delete request\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      message.success('Club banner deleted successfully');\r\n      fetchClubBanners();\r\n    } catch (error) {\r\n      console.log(error, token);\r\n\r\n      message.error('Failed to delete club banner');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    { title: 'Serial No.', dataIndex: 'serialNo', key: 'serialNo' },\r\n    { title: 'Title', dataIndex: 'type', key: 'type' },\r\n    {\r\n      title: 'Club Banner',\r\n      dataIndex: 'clubbanner',\r\n      key: 'clubbanner',\r\n      render: (clubbanner) => (\r\n        <img src={`https://majesticmall.net/image/${clubbanner}`} alt=\"Club Banner\" loading=\"lazy\" style={{ width: 100 }} onError={(e) => {\r\n          e.target.src = '../img/example.jpg'; // Replace with your default image URL\r\n        }} />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"text\"\r\n          icon={<Trash2 color=\"red\" />}\r\n          onClick={() => showDeleteConfirm(record._id)}\r\n        />\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const dataSource = clubBanners.map((banner, index) => ({\r\n    key: banner._id,\r\n    serialNo: index + 1,\r\n    type: banner.type,\r\n    clubbanner: banner.clubbanner,\r\n    _id: banner._id,\r\n  }));\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 16 }}>\r\n        <Title level={3} className=\"title\">Club Banners</Title>\r\n        <Button type=\"primary\" icon={<PlusOutlined />} onClick={() => setIsAddModalVisible(true)}>\r\n          Add Club Banner\r\n        </Button>\r\n      </div>\r\n\r\n      <Table\r\n        columns={columns}\r\n        dataSource={dataSource}\r\n        pagination={{\r\n          pageSize: 10,\r\n          //showSizeChanger: true, \r\n        }}\r\n        scroll={{ x: \"max-content\" }}\r\n        components={{\r\n          header: {\r\n            cell: (props) => (\r\n              <th\r\n                {...props}\r\n                style={{\r\n                  ...props.style,\r\n                  background: \"linear-gradient(#000,#000,#000)\",\r\n                  color: \"white\",\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        }}\r\n      />\r\n\r\n      <Modal\r\n        title=\"Add Club Banner\"\r\n        visible={isAddModalVisible}\r\n        onCancel={() => setIsAddModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleAddClubBanner} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"clubbanner\"\r\n            label=\"Club Banner Image\"\r\n            rules={[{ required: true, message: 'Please upload a club banner image' }]}\r\n          >\r\n            <Upload accept=\"image/*\" listType=\"picture-card\" maxCount={1} beforeUpload={() => false}>\r\n              <div>\r\n                <PlusOutlined />\r\n                <div style={{ marginTop: 8 }}>Upload</div>\r\n              </div>\r\n            </Upload>\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"type\"\r\n            label=\"Title\"\r\n            rules={[{ required: true, message: 'Please enter a title' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Add Club Banner\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddClubBanner;"],"names":["Title","Typography","API_BASE_URL","confirm","Modal","AddClubBanner","encryptedToken","Cookies","get","token","CryptoJS","decrypt","process","toString","Utf8","clubBanners","setClubBanners","useState","isAddModalVisible","setIsAddModalVisible","form","Form","useForm","useEffect","fetchClubBanners","async","response","axios","headers","Authorization","data","clubbanner","error","message","handleDeleteClubBanner","post","id","success","console","log","columns","title","dataIndex","key","render","_jsx","src","alt","loading","style","width","onError","e","target","_","record","Button","type","icon","Trash2","color","onClick","showDeleteConfirm","_id","content","okText","okType","cancelText","onOk","onCancel","dataSource","map","banner","index","serialNo","_jsxs","children","display","justifyContent","marginBottom","level","className","PlusOutlined","Table","pagination","pageSize","scroll","x","components","header","cell","props","background","visible","footer","onFinish","formData","FormData","append","values","file","resetFields","layout","Item","name","label","rules","required","Upload","accept","listType","maxCount","beforeUpload","marginTop","Input","htmlType"],"sourceRoot":""}