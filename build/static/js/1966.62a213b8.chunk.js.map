{"version":3,"file":"static/js/1966.62a213b8.chunk.js","mappings":"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","sources":["components/admin/pages/Driver.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  DatePicker,\r\n  Input,\r\n  Modal,\r\n  Space,\r\n  Table,\r\n  Typography,\r\n  Image,\r\n} from \"antd\";\r\nimport { SearchOutlined, ExclamationCircleOutlined } from \"@ant-design/icons\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport * as XLSX from \"xlsx\";\r\nimport moment from \"moment/moment\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport { FileSpreadsheet, Search, X } from \"lucide-react\";\r\nimport Cookies from 'js-cookie';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst columns = [\r\n  {\r\n    title: \"SNo\",\r\n    dataIndex: \"Sno\",\r\n    width: 50,\r\n  },\r\n  {\r\n    title: \"DriverID\",\r\n    dataIndex: \"driverId\",\r\n    width: 100,\r\n  },\r\n  {\r\n    title: \"Name\",\r\n    dataIndex: \"name\",\r\n    width: 100,\r\n  },\r\n  {\r\n    title: \"Email\",\r\n    dataIndex: \"email\",\r\n    width: 150,\r\n  },\r\n  {\r\n    title: \"Mobile\",\r\n    dataIndex: \"mobile\",\r\n    width: 100,\r\n  },\r\n  {\r\n    title: \"Registered Date\",\r\n    dataIndex: \"RegisteredDate\",\r\n    width: 100,\r\n  },\r\n  {\r\n    title: \"Aadhar Front\",\r\n    dataIndex: \"aadharFront\",\r\n    width: 100,\r\n    render: (text) => <Image src={text} width={50} />,\r\n  },\r\n  {\r\n    title: \"Aadhar Back\",\r\n    dataIndex: \"aadharBack\",\r\n    width: 100,\r\n    render: (text) => <Image src={text} width={50} />,\r\n  },\r\n  {\r\n    title: \"DL Image\",\r\n    dataIndex: \"dlImage\",\r\n    width: 100,\r\n    render: (text) => <Image src={text} width={50} />,\r\n  },\r\n  {\r\n    title: \"PAN Image\",\r\n    dataIndex: \"panImage\",\r\n    width: 100,\r\n    render: (text) => <Image src={text} width={50} />,\r\n  },\r\n  {\r\n    title: \"Action\",\r\n    dataIndex: \"action\",\r\n    width: 100,\r\n  },\r\n];\r\n\r\nconst Drivers = () => {\r\n  const [data1, setdata1] = useState([]);\r\n  const [Data, setdata] = useState(\"\");\r\n  const [show3, setShow3] = useState(false);\r\n  const handleClose3 = () => setShow3(false);\r\n  const handleShow3 = (item) => {\r\n    setShow3(true);\r\n    setdata(item);\r\n  };\r\n  const encryptionKey = process.env.REACT_APP_ENCRYPTION_KEY;\r\n  const encryptedToken = Cookies.get('token');\r\n  const token = encryptedToken ? CryptoJS.AES.decrypt(encryptedToken, encryptionKey).toString(CryptoJS.enc.Utf8) : null;\r\n\r\n  const getuser = async () => {\r\n    let res = await axios.get(\"https://majesticmall.net/api/user/getAlldriver\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    if (res.status === 200) {\r\n      setdata1(res.data.success);\r\n    }\r\n  };\r\n\r\n  const DeleteTrip = async () => {\r\n    try {\r\n      const config = {\r\n        url: \"user/deleteUser/\" + Data,\r\n        baseURL: \"https://majesticmall.net/api\",\r\n        method: \"DELETE\",\r\n        Headers: { \"Content-Type\": \"application-json\" },\r\n      };\r\n      await axios(config).then((res) => {\r\n        if (res.status === 200) {\r\n          toast.info(res.data.success);\r\n          handleClose3();\r\n          getuser();\r\n        }\r\n      });\r\n    } catch (error) {\r\n      toast.info(error.response.data.error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getuser();\r\n  }, []);\r\n  const block = async (data) => {\r\n    try {\r\n      axios\r\n        .get(`https://majesticmall.net/api/user/changedriverBlockStatus/` + data._id, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        })\r\n        .then(function (response) {\r\n          if (response.status === 200) {\r\n            toast.info(\"Blocked successfully\");\r\n            window.location.reload();\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toast.info(\"Not able to complete\");\r\n        });\r\n    } catch (error) {\r\n      console.warn(error);\r\n      toast.info(\"Not able to complete\");\r\n      return error;\r\n    }\r\n  };\r\n  const transformData = (data1) => {\r\n    return data1?.map((item, i) => {\r\n      return {\r\n        Sno: i + 1,\r\n        driverId: item.driverId,\r\n        name: item.name,\r\n        email: item.email,\r\n        mobile: item.mobile,\r\n        RegisteredDate: moment(item.createdAt).format(\"DD/MM/YYYY\"),\r\n        Date: item.createdAt,\r\n        aadharFront: `https://majesticmall.net/driver/${item.aadharFront}`,\r\n        aadharBack: `https://majesticmall.net/driver/${item.aadharBack}`,\r\n        dlImage: `https://majesticmall.net/driver/${item.dlImage}`,\r\n        panImage: `https://majesticmall.net/driver/${item.panImage}`,\r\n        action: (\r\n          <Space>\r\n            {item.blockstatus ? (\r\n              <Button type=\"primary\" onClick={() => unblock(item)}>\r\n                Approve\r\n              </Button>\r\n            ) : (\r\n              <Button danger onClick={() => block(item)}>\r\n                Block\r\n              </Button>\r\n            )}\r\n            {/* <Button type=\"default\" onClick={() => approve(item)}>\r\n              Approve\r\n            </Button> */}\r\n          </Space>\r\n        ),\r\n      };\r\n    });\r\n  };\r\n\r\n  const approve = async (data) => {\r\n    try {\r\n      axios\r\n        .get(\r\n          `https://majesticmall.net/api/user/changedriverunBlockStatus/` + data._id,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        )\r\n        .then(function (response) {\r\n          if (response.status === 200) {\r\n            toast.info(\"Approved successfully\");\r\n            window.location.reload();\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toast.info(\"Not able to complete\");\r\n        });\r\n    } catch (error) {\r\n      console.warn(error);\r\n      toast.info(\"Not able to complete\");\r\n      return error;\r\n    }\r\n  };\r\n  const unblock = async (data) => {\r\n    try {\r\n      axios\r\n        .get(\r\n          `https://majesticmall.net/api/user/changedriverunBlockStatus/` + data._id,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        )\r\n        .then(function (response) {\r\n          if (response.status === 200) {\r\n            toast.info(\"Unblocked successfully\");\r\n            window.location.reload();\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toast.info(\"Not able to complete\");\r\n        });\r\n    } catch (error) {\r\n      console.warn(error);\r\n      toast.info(\"Not able to complete\");\r\n      return error;\r\n    }\r\n  };\r\n  const [data2, setData2] = useState([]);\r\n  const [filteredData, setFilteredData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getuser().then((result) => {\r\n      setdata1(result);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data1 && data1.length > 0) {\r\n      const transformedData = transformData(data1);\r\n      setData2(transformedData);\r\n      setFilteredData(transformedData);\r\n    }\r\n  }, [data1]);\r\n\r\n  const exportToExcel = () => {\r\n    const dataToExport = filteredData.map(\r\n      ({ RegisteredDate, ...rest }) => rest\r\n    );\r\n    const worksheet = XLSX.utils.json_to_sheet(dataToExport);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Drivers\");\r\n    XLSX.writeFile(workbook, \"Drivers.xlsx\");\r\n  };\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  const handles = (value) => {\r\n    setSearchTerm(value);\r\n\r\n    const filteredDataSource = data2.filter((record) => {\r\n      return Object.values(record).some(\r\n        (val) =>\r\n          val && val.toString().toLowerCase().includes(value.toLowerCase())\r\n      );\r\n    });\r\n\r\n    setFilteredData(filteredDataSource);\r\n  };\r\n\r\n  const onClearSearch = () => {\r\n    setSearchTerm(\"\");\r\n    setFilteredData(data2);\r\n  };\r\n\r\n  const searchInput = (\r\n    <Input\r\n      placeholder=\"Search\"\r\n      value={searchTerm}\r\n      style={{ width: \"40%\" }}\r\n      onChange={(e) => handles(e.target.value)}\r\n      suffix={\r\n        searchTerm && (\r\n          <span\r\n            onClick={onClearSearch}\r\n            style={{ cursor: \"pointer\", color: \"grey\" }}\r\n          >\r\n            Clear\r\n          </span>\r\n        )\r\n      }\r\n      prefix={<SearchOutlined />}\r\n    />\r\n  );\r\n\r\n  const pageSize = 5;\r\n\r\n  const [dateRange, setDateRange] = useState([null, null]);\r\n\r\n  const handleDateRangeChange = (dates) => {\r\n    const filteredDataSource = data2.filter((record) => {\r\n      const startDate =\r\n        dates && dates[0] ? new Date(dates[0].startOf(\"day\").toDate()) : null;\r\n      const endDate =\r\n        dates && dates[1] ? new Date(dates[1].endOf(\"day\").toDate()) : null;\r\n      const recordDate = new Date(record.Date);\r\n\r\n      const result =\r\n        (!startDate || recordDate >= startDate) &&\r\n        (!endDate || recordDate <= endDate);\r\n\r\n      return result;\r\n    });\r\n\r\n    if (filteredDataSource.length === 0) {\r\n      setFilteredData([]);\r\n    } else {\r\n      setFilteredData(filteredDataSource);\r\n      setDateRange(dates);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <ToastContainer />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: 16,\r\n        }}\r\n      >\r\n        <Title level={3}>Drivers</Title>\r\n        <Space>\r\n          <Input\r\n            placeholder=\"Search\"\r\n            value={searchTerm}\r\n            onChange={(e) => handles(e.target.value)}\r\n            style={{ width: 200 }}\r\n            prefix={<Search size={16} />}\r\n            suffix={\r\n              searchTerm && (\r\n                <X\r\n                  size={16}\r\n                  style={{ cursor: \"pointer\" }}\r\n                  onClick={() => handles(\"\")}\r\n                />\r\n              )\r\n            }\r\n          />\r\n          <DatePicker.RangePicker\r\n            value={dateRange}\r\n            onChange={handleDateRangeChange}\r\n          />\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<FileSpreadsheet size={16} />}\r\n            onClick={exportToExcel}\r\n          >\r\n            Export to Excel\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          //showSizeChanger: true, \r\n        }}\r\n        scroll={{ x: \"max-content\" }}\r\n        components={{\r\n          header: {\r\n            cell: (props) => (\r\n              <th\r\n                {...props}\r\n                style={{\r\n                  ...props.style,\r\n                  background: \"linear-gradient(#000,#000,#000)\",\r\n                  color: \"white\",\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Drivers;\r\n"],"names":["Title","Typography","columns","title","dataIndex","width","render","text","_jsx","Image","src","Drivers","data1","setdata1","useState","Data","setdata","show3","setShow3","encryptedToken","Cookies","get","token","CryptoJS","decrypt","process","toString","Utf8","getuser","async","res","axios","headers","Authorization","status","data","success","useEffect","transformData","map","item","i","Sno","driverId","name","email","mobile","RegisteredDate","moment","createdAt","format","Date","aadharFront","aadharBack","dlImage","panImage","action","Space","children","blockstatus","Button","type","onClick","unblock","danger","_id","then","response","toast","info","window","location","reload","catch","error","console","warn","block","data2","setData2","filteredData","setFilteredData","result","length","transformedData","searchTerm","setSearchTerm","handles","value","filteredDataSource","filter","record","Object","values","some","val","toLowerCase","includes","dateRange","setDateRange","Input","SearchOutlined","_jsxs","style","padding","ToastContainer","display","justifyContent","alignItems","marginBottom","level","placeholder","onChange","e","target","prefix","Search","size","suffix","X","cursor","DatePicker","RangePicker","dates","startDate","startOf","toDate","endDate","endOf","recordDate","icon","FileSpreadsheet","exportToExcel","dataToExport","_ref","rest","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","Table","dataSource","pagination","pageSize","scroll","x","components","header","cell","props","background","color"],"sourceRoot":""}