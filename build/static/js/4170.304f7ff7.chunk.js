"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[4170],{94170:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(65043),o=a(23927),n=a(3188),r=a(6051),c=a(27210),l=a(49757),i=a(86213),d=a(11238),u=a(86178),p=a.n(u),h=a(39292),y=a(1457),m=a(78745),f=a(1880),x=a(86111),v=a.n(x),g=a(70579);const{Title:j}=o.A,w=()=>{const e=f.A.get("token"),[t,a]=(e&&v().AES.decrypt(e,"Abhinanadan02").toString(v().enc.Utf8),(0,s.useState)([])),[o,u]=(0,s.useState)([]);(0,s.useEffect)((()=>{x()}),[]);const x=async()=>{try{const e=await i.A.get("https://majesticmall.net/api/user/getAllleaves");if(200===e.status){const t=w(e.data.success);a(t),u(t)}}catch(e){console.error("Error fetching leaves:",e)}},w=e=>e.map(((e,t)=>({key:t+1,_id:e._id,userName:e.userName,fromDate:p()(e.FromDate).format("YYYY-MM-DD"),toDate:p()(e.ToDate).format("YYYY-MM-DD"),leaveType:e.LeaveType,status:e.status}))),A=[{title:"Driver Name",dataIndex:"userName",key:"userName"},{title:"From Date",dataIndex:"fromDate",key:"fromDate"},{title:"To Date",dataIndex:"toDate",key:"toDate"},{title:"Leave Type",dataIndex:"leaveType",key:"leaveType"},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",render:e=>(0,g.jsx)(g.Fragment,{children:"Approved"!==e.status&&"Rejected"!==e.status&&(0,g.jsxs)(g.Fragment,{children:[" ",(0,g.jsx)(n.Ay,{type:"primary",onClick:()=>(async e=>{try{i.A.post("https://majesticmall.net/api/user/changeleavesStatus",{leavesId:e,status:"Approved"}).then((function(e){200===e.status&&(m.oR.info("Approved successfully"),window.location.reload())})).catch((function(e){window.location.reload()}))}catch(t){return console.warn(t),window.location.reload(),t}})(e._id),style:{marginRight:"10px",backgroundColor:"green"},children:"Approve"}),(0,g.jsx)(n.Ay,{type:"danger",onClick:()=>(async e=>{try{await i.A.post("https://majesticmall.net/api/user/changeleavesStatus",{leavesId:e,status:"Rejected"}).then((function(e){200===e.status&&(m.oR.info("Rejected successfully"),window.location.reload())})).catch((function(e){window.location.reload()}))}catch(t){return console.warn(t),window.location.reload(),t}})(e._id),style:{backgroundColor:"red",color:"white"},children:"Reject"})," "]})})}];return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,g.jsx)(j,{level:3,children:"Leaves"}),(0,g.jsxs)(r.A,{children:[(0,g.jsx)(c.A,{placeholder:"Search",onChange:e=>{const a=e.target.value.toLowerCase(),s=t.filter((e=>Object.values(e).some((e=>"string"===typeof e&&e.toLowerCase().includes(a)))));u(s)},prefix:(0,g.jsx)(h.A,{size:16})}),(0,g.jsx)(n.Ay,{type:"primary",onClick:()=>{const e=d.Wp.json_to_sheet(o),t=d.Wp.book_new();d.Wp.book_append_sheet(t,e,"Leaves"),d._h(t,"LeavesData.xlsx")},icon:(0,g.jsx)(y.A,{size:16}),children:"Export to Excel"})]})]}),(0,g.jsx)(l.A,{columns:A,dataSource:o,pagination:{pageSize:10},scroll:{x:"max-content"},components:{header:{cell:e=>(0,g.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}})]})}}}]);
//# sourceMappingURL=4170.304f7ff7.chunk.js.map