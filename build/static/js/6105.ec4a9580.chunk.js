"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[6105],{97959:(e,t,i)=>{i.d(t,{A:()=>r});i(65043);var s=i(70579);const r=e=>{const{type:t,label:i,i_id:r,i_class:a,name:o,val:l,onChng:n,onBlr:c,style:d}=e;return(0,s.jsxs)("div",{className:"form-floating mt-3",children:[(0,s.jsx)("label",{htmlFor:i,children:i}),(0,s.jsx)("input",{type:t,className:`form-control ${a}`,id:r,placeholder:i,value:l,onChange:n,style:d,onBlur:c})]})}},26105:(e,t,i)=>{i.r(t),i.d(t,{default:()=>se});var s=i(65043),r=i(23927),a=i(27210),o=i(89073),l=i(22019),n=i(59748),c=i(3188),d=i(6051),u=i(46909),h=i(8918),m=i(20691),x=i(76399),g=i(8354),p=i(6036),A=i(49757),y=i(35087),j=i(26533),v=i(9855),b=i(57856),f=i(76245),S=i(1457),_=i(70067),w=i(39292),C=i(71360),k=i(62862),N=i(7249),P=i(86213),W=i(34535),B=i(11238),$=i(80229),I=i(1880),z=i(86111),U=i.n(z),R=i(47715),D=i(63336),F=i(68903),L=i(53193),E=i(79190),M=i(32143),T=i(15795),V=i(15316),O=i(26494),G=i(17392),H=i(31517),K=i(80726),Q=i.n(K),q=i(68424),J=(i(97959),i(35475)),X=i(70579);const{Title:Y,Text:Z}=r.A,{Option:ee}=R.A,{TextArea:te}=a.A,ie=(0,W.Ay)(D.A)((e=>{let{theme:t}=e;return{border:`2px dashed ${t.palette.divider}`,padding:t.spacing(4),textAlign:"center",cursor:"pointer",marginBottom:t.spacing(2),"&:hover":{borderColor:t.palette.primary.main}}})),se=()=>{var e;const t=I.A.get("token"),i=t?U().AES.decrypt(t,"Abhinanadan02").toString(U().enc.Utf8):null,[z,K]=(0,s.useState)(!1),[ee,te]=(0,s.useState)([]),[se,re]=(0,s.useState)([]),[ae,oe]=(0,s.useState)(!1),[le,ne]=(0,s.useState)(""),[ce,de]=(0,s.useState)([]),[ue,he]=(0,s.useState)([]),[me,xe]=(0,s.useState)([]),[ge,pe]=(0,s.useState)([]),[Ae,ye]=(0,s.useState)(""),[je,ve]=(0,s.useState)(""),[be,fe]=(0,s.useState)(""),[Se,_e]=(0,s.useState)(""),[we,Ce]=(0,s.useState)(""),[ke,Ne]=(0,s.useState)(""),[Pe,We]=(0,s.useState)(""),[Be,$e]=(0,s.useState)(""),[Ie,ze]=(0,s.useState)(""),[Ue,Re]=(0,s.useState)(""),[De,Fe]=(0,s.useState)(""),[Le,Ee]=(0,s.useState)(""),[Me,Te]=(0,s.useState)(""),[Ve,Oe]=(0,s.useState)({}),[Ge,He]=(0,s.useState)({}),[Ke,Qe]=(0,s.useState)({value:"",price:"",units:"",stock:"",minStock:""}),[qe,Je]=(0,s.useState)([]),[Xe,Ye]=(0,s.useState)([]),Ze=(0,W.Ay)(o.A)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(1)}})),{getRootProps:et,getInputProps:tt}=(0,q.VB)({onDrop:e=>st([...it,...e]),accept:"image/*,video/*"}),[it,st]=(0,s.useState)([]);(0,s.useEffect)((()=>{(async()=>{let e=await P.A.get("https://majesticmall.net/api/admin/getUnit",{headers:{Authorization:`Bearer ${i}`}});var t;(e.status=200)&&pe(null===(t=e.data)||void 0===t?void 0:t.Unit)})(),(async()=>{let e=await P.A.get("https://majesticmall.net/api/admin/getTag",{headers:{Authorization:`Bearer ${i}`}});var t;(e.status=200)&&xe(null===(t=e.data)||void 0===t?void 0:t.Tag)})(),(async()=>{try{const s=await P.A.get("https://majesticmall.net/api/admin/getCategory",{headers:{Authorization:`Bearer ${i}`}});if(200===s.status){var e,t;de(null===(e=s.data)||void 0===e?void 0:e.category);const i={};null===(t=s.data)||void 0===t||t.category.forEach((e=>{i[e._id]=e.categoryName})),Oe(i)}}catch(s){l.Ay.error("Failed to fetch categories")}})(),(async()=>{try{const s=await P.A.get("https://majesticmall.net/api/admin/getSubcategory",{headers:{Authorization:`Bearer ${i}`}});if(200===s.status){var e,t;he(null===(e=s.data)||void 0===e?void 0:e.Subcategory);const i={};null===(t=s.data)||void 0===t||t.Subcategory.forEach((e=>{i[e._id]=e.SubcategoryName})),He(i)}}catch(s){l.Ay.error("Failed to fetch subcategories")}})()}),[]);const[rt,at]=(0,s.useState)(!1),[ot,lt]=(0,s.useState)(!1),[nt,ct]=(0,s.useState)(!1),[dt,ut]=(0,s.useState)(null),[ht]=n.A.useForm(),[mt,xt]=(0,s.useState)(null),gt=(e,t)=>(e-e*t/100).toFixed(2),pt=async()=>{try{oe(!0);const e=(await P.A.get("https://majesticmall.net/api/admin/Getfruitslist",{headers:{Authorization:`Bearer ${i}`}})).data.fruitsList;te(e),re(e)}catch(e){l.Ay.error("Failed to fetch products")}finally{oe(!1)}};(0,s.useEffect)((()=>{pt()}),[]);const At=qe.concat(null===dt||void 0===dt?void 0:dt.weight),yt=async e=>{const t=new FormData;try{for(let s=0;s<it.length;s++)t.append("id",e),t.append("Photos",it[s]),await fetch("https://majesticmall.net/api/admin/addfruitsPhotos/",{method:"post",body:t,headers:{Authorization:`Bearer ${i}`}});l.Ay.success("Products updated successfully"),window.location.reload()}catch(s){}},jt=[{title:"Product Name",dataIndex:"productname",key:"productname",sorter:(e,t)=>e.productname.localeCompare(t.productname)},{title:"Category",dataIndex:"category",key:"category",render:e=>Ve[e]||"Unknown Category"},{title:"Subcategory",dataIndex:"subcategory",key:"subcategory",render:e=>Ge[e]||"Unknown Subcategory"},{title:"Price",dataIndex:"price",key:"price",sorter:(e,t)=>e.price-t.price},{title:"Status",key:"status",render:(e,t)=>(0,X.jsx)(c.Ay,{type:"Active"===t.status?"primary":"danger",onClick:()=>(async e=>{try{const t="Active"===e.status?"changefruitsActiveStatus":"changefruitsInactiveStatus";await P.A.get(`https://majesticmall.net/api/admin/${t}/${e._id}`,{headers:{Authorization:`Bearer ${i}`}}),l.Ay.success(`Product ${"Active"===e.status?"blocked":"unblocked"} successfully`),pt()}catch(t){l.Ay.error("Failed to update product status")}})(t),children:"Active"===t.status?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(e,t)=>(0,X.jsxs)(d.A,{children:[(0,X.jsx)(c.Ay,{type:"text",icon:(0,X.jsx)(y.A,{size:16}),onClick:()=>{ut(t),K(!0)}}),(0,X.jsx)(c.Ay,{type:"text",icon:(0,X.jsx)(j.A,{size:16}),onClick:()=>{return ut(e=t),ht.setFieldsValue(e),void at(!0);var e}}),(0,X.jsx)(c.Ay,{type:"text",danger:!0,icon:(0,X.jsx)(v.A,{size:16}),onClick:()=>{ut(t),lt(!0)}})]})}],vt=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),bt=e=>{var t;let{product:s,visible:r,onClose:a}=e;if(!s)return null;const n=s.weight,p=s.Clubweight;return(0,X.jsx)(u.A,{title:(0,X.jsxs)(d.A,{children:[(0,X.jsx)(b.A,{size:20})," Product Details"]}),visible:r,onCancel:a,width:1e3,footer:[(0,X.jsx)(c.Ay,{onClick:a,children:"Close"},"close")],children:(0,X.jsxs)(h.A,{defaultActiveKey:"1",children:[(0,X.jsx)(k.A,{tab:"Basic Information",children:(0,X.jsxs)(m.A,{bordered:!0,column:2,children:[(0,X.jsx)(m.A.Item,{label:"Product Name",span:2,children:s.productname}),(0,X.jsx)(m.A.Item,{label:"Category",children:Ve[s.category]}),(0,X.jsx)(m.A.Item,{label:"Subcategory",children:Ge[s.subcategory]}),(0,X.jsx)(m.A.Item,{label:"Tag",children:s.tag}),(0,X.jsx)(m.A.Item,{label:"Subscription Type",children:s.subscribe}),(0,X.jsx)(m.A.Item,{label:"Base Price",children:vt(s.price)}),(0,X.jsx)(m.A.Item,{label:"Status",children:(0,X.jsx)(x.A,{color:"Active"===s.status?"green":"red",children:s.status})})]})},"1"),(0,X.jsx)(k.A,{tab:"Pricing & Discounts",children:(0,X.jsxs)(o.A,{title:"Regular Pricing",children:[(0,X.jsxs)(m.A,{bordered:!0,column:2,children:[(0,X.jsx)(m.A.Item,{label:"Base Price",children:vt(s.price)}),(0,X.jsxs)(m.A.Item,{label:"Regular Discount",children:[s.discount,"%"]}),(0,X.jsxs)(m.A.Item,{label:"Club Discount",children:[s.clubdiscount,"%"]})]}),(0,X.jsx)(g.A,{children:"Weight-based Pricing"}),(0,X.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,X.jsx)(o.A,{title:"Regular Prices",style:{flex:1},children:n.map(((e,t)=>(0,X.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,X.jsx)(x.A,{color:"blue",children:e.value+" "+(null===e||void 0===e?void 0:e.units)}),(0,X.jsx)(Z,{style:{marginLeft:"10px"},children:vt(e.price)}),(0,X.jsxs)(Z,{style:{marginLeft:"10px"},children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]})]},t)))}),(0,X.jsx)(o.A,{title:"Club Member Prices",style:{flex:1},children:p.map(((e,t)=>(0,X.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,X.jsx)(x.A,{color:"purple",children:e.value+" "+(null===e||void 0===e?void 0:e.units)}),(0,X.jsx)(Z,{style:{marginLeft:"10px"},children:vt(e.price)}),(0,X.jsxs)(Z,{style:{marginLeft:"10px"},children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]})]},t)))})]})]})},"2"),(0,X.jsx)(k.A,{tab:"Description",children:(0,X.jsx)(o.A,{children:s.description&&"string"===typeof s.description?(0,$.Ay)(s.description):"No description available"})},"4"),(0,X.jsx)(k.A,{tab:"Media Gallery",children:(0,X.jsx)("div",{className:"grid grid-cols-3 gap-4",children:null===(t=s.Photos)||void 0===t?void 0:t.map(((e,t)=>(0,X.jsxs)("div",{className:"relative",children:[e.file.match(/\.(mp4)$/i)?(0,X.jsx)("video",{src:`https://majesticmall.net/product/${e.file}`,className:"w-full h-40 object-contain rounded",controls:!0}):(0,X.jsx)("img",{src:`https://majesticmall.net/product/${e.file}`,alt:`Product ${t+1}`,loading:"lazy",onError:e=>{e.target.src="../../img/example.jpg"},className:"w-full h-40 object-contain rounded"}),(0,X.jsx)(c.Ay,{type:"text",danger:!0,icon:(0,X.jsx)(f.A,{size:16}),className:"absolute top-2 right-2",onClick:()=>(async(e,t)=>{try{await P.A.delete(`https://majesticmall.net/api/admin/removefruitsPhotos/${e}/${t}`,{headers:{Authorization:`Bearer ${i}`}}),l.Ay.success("Photo removed successfully"),pt(),window.location.reload()}catch(s){l.Ay.error("Failed to remove photo")}})(s._id,e._id)})]},t)))})},"5")]})})};return(0,X.jsxs)("div",{className:"p-0",children:[(0,X.jsx)(o.A,{children:(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsx)(Y,{level:3,children:"Fruits and Vegetables Product Management"}),(0,X.jsxs)(d.A,{className:"mb-4",children:[(0,X.jsx)(c.Ay,{type:"primary",className:"buttons",children:(0,X.jsx)("a",{style:{textDecoration:"none",color:"white"},href:"https://majesticmall.net/excelfile/fruitexcel.xlsx",target:"_blank",rel:"noopener noreferrer",children:"Download Excel Template"})}),(0,X.jsx)(c.Ay,{type:"primary",className:"buttons",children:(0,X.jsx)(J.N_,{style:{textDecoration:"none",color:"white"},to:"/admindashboard/fruits",children:"Add Product"})}),(0,X.jsx)(p.A,{accept:".xlsx,.xls",showUploadList:!1,beforeUpload:e=>((async e=>{const t=new FileReader;t.onload=async e=>{try{const t=B.LF(e.target.result,{type:"binary"}),s=t.SheetNames[0],r=t.Sheets[s],a=B.Wp.sheet_to_json(r),[o,n]=await Promise.all([P.A.get("https://majesticmall.net/api/admin/getCategory",{headers:{Authorization:`Bearer ${i}`}}),P.A.get("https://majesticmall.net/api/admin/getSubcategory",{headers:{Authorization:`Bearer ${i}`}})]),c={},d={};o.data.category.filter((e=>"Active"===e.status)).forEach((e=>{c[e.categoryName.toLowerCase()]=e._id})),n.data.Subcategory.filter((e=>"Active"===e.status)).forEach((e=>{d[e.SubcategoryName.toLowerCase()]=e._id}));const u=a.map((e=>{const t=c[e.Category.toLowerCase()],i=d[e.Subcategory.toLowerCase()];if(!t)throw new Error(`Category "${e.Category}" not found in the system`);if(!i)throw new Error(`Subcategory "${e.Subcategory}" not found in the system`);return{productname:e.Product_Name,category:t,subcategory:i,description:e.Description,price:e.MRP_Price,discount:e.Discount||0,unit:e.Current_Unit,miniunit:e.Minimum_Unit,stock:e.Current_Stock,clubdiscount:e.Club_Discount||0,weight:e.Normal_Weight_Value&&e.Normal_Weight_Price&&e.Normal_Weight_Units?[{value:e.Normal_Weight_Value,price:e.Normal_Weight_Price,units:e.Normal_Weight_Units},{value:e.Normal_Weight_Value1,price:e.Normal_Weight_Price1,units:e.Normal_Weight_Units1},{value:e.Normal_Weight_Value2,price:e.Normal_Weight_Price2,units:e.Normal_Weight_Units2}]:void 0,Clubweight:e.Normal_Weight_Value&&e.Normal_Weight_Price&&e.Normal_Weight_Units?[{value:e.Normal_Weight_Value,price:e.Normal_Weight_Price,units:e.Normal_Weight_Units},{value:e.Normal_Weight_Value1,price:e.Normal_Weight_Price1,units:e.Normal_Weight_Units1},{value:e.Normal_Weight_Value2,price:e.Normal_Weight_Price2,units:e.Normal_Weight_Units2}]:void 0,Photos:[{file:e.Product_Image_1_Name},{file:e.Product_Image_2_Name},{file:e.Product_Image_3_Name},{file:e.Product_Image_4_Name}].filter((e=>e.file)),tag:e.Tag,subscribe:e.Normal_Subscribe,ministock:e.Minimum_Stock||0,status:"Active"}}));200===(await P.A.post("https://majesticmall.net/api/admin/addmultifruits",{fruits:u},{headers:{Authorization:`Bearer ${i}`}})).status&&(l.Ay.success("Fruits imported successfully"),pt())}catch(t){t.message.includes("not found in the system")?l.Ay.error(t.message):(l.Ay.error("Failed to import fruits"),console.error("Excel upload error:",t))}},t.readAsBinaryString(e)})(e),!1),children:(0,X.jsx)(c.Ay,{icon:(0,X.jsx)(S.A,{size:16}),children:"Import Excel"})}),(0,X.jsx)(c.Ay,{icon:(0,X.jsx)(S.A,{size:16}),onClick:()=>{const e=se.map((e=>{let{description:t,Photos:i,weight:s,Clubweight:r,stock:a,ministock:o,unit:l,miniunit:n,...c}=e;return c})),t=B.Wp.json_to_sheet(e),i=B.Wp.book_new();B.Wp.book_append_sheet(i,t,"Products"),B._h(i,"fruits-export.xlsx")},children:"Export Excel"}),(0,X.jsx)(p.A,{accept:"image/*,video/*",multiple:!0,showUploadList:!1,beforeUpload:e=>((async e=>{const t=new FormData;e.forEach((e=>{t.append("productimage",e)}));try{200===(await P.A.post("https://majesticmall.net/api/admin/productimage",t,{headers:{Authorization:`Bearer ${i}`}})).status&&(l.Ay.success("Images uploaded successfully"),pt())}catch(s){l.Ay.error("Failed to upload images")}})([e]),!1),children:(0,X.jsx)(c.Ay,{icon:(0,X.jsx)(_.A,{size:16}),children:"Upload Images"})}),(0,X.jsx)(bt,{product:dt,visible:z,onClose:()=>K(!1)})]}),(0,X.jsx)(a.A,{placeholder:"Search products...",prefix:(0,X.jsx)(w.A,{size:16}),value:le,onChange:e=>(e=>{ne(e);const t=ee.filter((t=>Object.values(t).some((t=>t&&t.toString().toLowerCase().includes(e.toLowerCase())))));re(t)})(e.target.value),className:"mb-4",allowClear:!0}),(0,X.jsx)(A.A,{columns:jt,dataSource:se,rowKey:"_id",loading:ae,pagination:{pageSize:10,showSizeChanger:!0},scroll:{x:"max-content"},components:{header:{cell:e=>(0,X.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}})]})}),(0,X.jsxs)(N.A,{show:rt,dialogClassName:"custom-modal1",onHide:()=>at(!1),backdrop:"static",keyboard:!1,children:[(0,X.jsx)(N.A.Header,{closeButton:!0,children:(0,X.jsx)(N.A.Title,{children:"Update Product"})}),(0,X.jsx)(N.A.Body,{children:(0,X.jsxs)(F.Ay,{container:!0,spacing:3,children:[(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsxs)(D.A,{sx:{p:3},children:[(0,X.jsx)(r.A,{variant:"h6",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Basic Information"}),(0,X.jsxs)(F.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsxs)(L.A,{fullWidth:!0,children:[(0,X.jsx)(E.A,{children:"Category"}),(0,X.jsxs)(R.A,{onChange:e=>fe(e.target.value),value:be||(null===dt||void 0===dt?void 0:dt.category),label:"Category",children:[(0,X.jsx)(M.A,{value:"",children:"Select Category"}),null===ce||void 0===ce?void 0:ce.map(((e,t)=>(0,X.jsx)(M.A,{value:e._id,children:e.categoryName},t)))]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsxs)(L.A,{fullWidth:!0,children:[(0,X.jsx)(E.A,{children:"Sub-Category"}),(0,X.jsxs)(R.A,{onChange:e=>_e(e.target.value),value:Se||Ge[null===dt||void 0===dt?void 0:dt.subcategory],label:"Sub-Category",children:[(0,X.jsx)(M.A,{value:"",children:"Select Sub-Category"}),ue.filter((e=>e.categoryId===be)).map(((e,t)=>(0,X.jsx)(M.A,{value:e._id,children:e.SubcategoryName},t)))]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsxs)(L.A,{fullWidth:!0,children:[(0,X.jsx)(E.A,{children:"Product Type"}),(0,X.jsxs)(R.A,{onChange:e=>Ee(e.target.value),value:Le||(null===dt||void 0===dt?void 0:dt.subscribe),label:"Product Type",children:[(0,X.jsx)(M.A,{value:"",children:"Select Type"}),(0,X.jsx)(M.A,{value:"Normal",children:"Normal"}),(0,X.jsx)(M.A,{value:"Subscription",children:"Subscription"})]})]})})]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsxs)(D.A,{sx:{p:3},children:[(0,X.jsx)(r.A,{variant:"h6",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Product Details"}),(0,X.jsxs)(F.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"text",label:"Product Title",onChange:e=>ye(e.target.value),value:Ae||(null===dt||void 0===dt?void 0:dt.productname)})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Product Price",onChange:e=>ve(e.target.value),value:je||(null===dt||void 0===dt?void 0:dt.price)})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:4,children:(0,X.jsxs)(L.A,{fullWidth:!0,children:[(0,X.jsx)(E.A,{children:"Product Tag"}),(0,X.jsxs)(R.A,{onChange:e=>Ce(e.target.value),value:we||(null===dt||void 0===dt?void 0:dt.tag),label:"Product Tag",children:[(0,X.jsx)(M.A,{value:"",children:"Select Tag"}),me.map(((e,t)=>(0,X.jsx)(M.A,{value:e.tag,children:e.tag},t)))]})]})})]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsxs)(D.A,{sx:{p:3},children:[(0,X.jsx)(r.A,{variant:"h6",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Pricing Options"}),(0,X.jsxs)(F.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(F.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Normal Member Discount (%)",onChange:e=>Ne(e.target.value),value:ke||(null===dt||void 0===dt?void 0:dt.discount)})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Club Member Discount (%)",onChange:e=>We(e.target.value),value:Pe||(null===dt||void 0===dt?void 0:dt.clubdiscount)})})]}),(0,X.jsx)(V.A,{sx:{mt:3},children:(0,X.jsxs)(F.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Weight/Volume",value:Ke.value,onChange:e=>Qe({...Ke,value:e.target.value})})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsxs)(L.A,{fullWidth:!0,children:[(0,X.jsx)(E.A,{children:"Units"}),(0,X.jsxs)(R.A,{value:Ke.units,onChange:e=>Qe({...Ke,units:e.target.value}),label:"Units",children:[(0,X.jsx)(M.A,{value:"",children:"Select Units"}),ge.map(((e,t)=>(0,X.jsx)(M.A,{value:e.unit,children:e.unit},t)))]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Price",value:Ke.price,onChange:e=>Qe({...Ke,price:e.target.value})})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Stock Quantity",value:Ke.stock,onChange:e=>Qe({...Ke,stock:e.target.value})})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsx)(T.A,{fullWidth:!0,type:"number",label:"Min Stock Alert",value:Ke.minStock,onChange:e=>Qe({...Ke,minStock:e.target.value})})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,md:2,children:(0,X.jsx)(c.Ay,{variant:"contained",startIcon:(0,X.jsx)(C.A,{}),fullWidth:!0,onClick:()=>(e=>{if(Ke.value&&Ke.price&&Ke.units&&ke?ke:e.discount&&Pe?Pe:e.clubdiscount){const t=gt(Number(Ke.price),Number(ke||e.discount)),i=gt(Number(Ke.price),Number(Pe||e.clubdiscount)),s={...Ke,discountedPrice:t,id:Date.now()},r={...Ke,discountedPrice:i,id:Date.now()};Je([...qe,s]),Ye([...Xe,r]),Qe({value:"",price:"",units:"",stock:"",minStock:""})}else l.Ay.error("Please fill in all option details and discounts")})(dt),sx:{height:"56px"},style:{backgroundColor:"#000",color:"white"},children:"Add Option"})})]})}),qe.length>0&&(0,X.jsxs)(V.A,{sx:{mt:3},children:[(0,X.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Normal Members Preview"}),qe.map((e=>(0,X.jsx)(Ze,{children:(0,X.jsxs)(O.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsxs)(r.A,{children:[e.value," ",e.units," - Rs ",e.price," (Discounted: Rs ",e.discountedPrice,")"]}),(0,X.jsxs)(r.A,{variant:"body2",color:"textSecondary",children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]}),(0,X.jsx)(G.A,{onClick:()=>{return t=e.id,void Je(qe.filter((e=>e.id!==t)));var t},color:"error",children:(0,X.jsx)(v.A,{})})]})},e.id)))]}),(null===dt||void 0===dt?void 0:dt.weight.length)>0&&(0,X.jsxs)(V.A,{sx:{mt:3},children:[(0,X.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Normal Members Preview"}),null===dt||void 0===dt?void 0:dt.weight.map((e=>(0,X.jsx)(Ze,{children:(0,X.jsxs)(O.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsxs)(r.A,{children:[e.value," ",e.units," - Rs ",e.price," (Discounted: Rs ",e.price-e.price*(ke||(null===dt||void 0===dt?void 0:dt.discount)/100),")"]}),(0,X.jsxs)(r.A,{variant:"body2",color:"textSecondary",children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]}),(0,X.jsx)(G.A,{onClick:()=>(async(e,t)=>{try{const s={url:`/removefruitsWeight/${e}/${t}`,method:"delete",baseURL:"https://majesticmall.net/api/admin",headers:{"content-type":"application/json"},headers:{Authorization:`Bearer ${i}`}};if(200!==(await(0,P.A)(s)).status)throw new Error("Failed to delete image");l.Ay.success("Successfully removed"),window.location.reload()}catch(s){s.response?l.Ay.error(s.response.data.error):l.Ay.error("Something Wrong")}})(null===dt||void 0===dt?void 0:dt._id,null===e||void 0===e?void 0:e._id),color:"error",children:(0,X.jsx)(v.A,{})})]})},e.id)))]}),Xe.length>0&&(0,X.jsxs)(V.A,{sx:{mt:3},children:[(0,X.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Club Members Preview"}),Xe.map((e=>(0,X.jsx)(Ze,{children:(0,X.jsxs)(O.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsxs)(r.A,{children:[e.value," ",e.units," - Rs ",e.price," (Discounted: Rs ",e.discountedPrice,")"]}),(0,X.jsxs)(r.A,{variant:"body2",color:"textSecondary",children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]}),(0,X.jsx)(G.A,{onClick:()=>{return t=e.id,void Ye(Xe.filter((e=>e.id!==t)));var t},color:"error",children:(0,X.jsx)(v.A,{})})]})},e.id)))]}),(null===dt||void 0===dt?void 0:dt.Clubweight.length)>0&&(0,X.jsxs)(V.A,{sx:{mt:3},children:[(0,X.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Club Members Preview"}),null===dt||void 0===dt?void 0:dt.Clubweight.map((e=>(0,X.jsx)(Ze,{children:(0,X.jsxs)(O.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsxs)(r.A,{children:[e.value," ",e.units," - Rs ",e.price," (Discounted: Rs  ",e.price-e.price*(Pe||(null===dt||void 0===dt?void 0:dt.clubdiscount)/100),")"]}),(0,X.jsxs)(r.A,{variant:"body2",color:"textSecondary",children:["Stock: ",e.stock," | Min Stock Alert:"," ",e.minStock]}),(0,X.jsx)(G.A,{onClick:()=>(async(e,t)=>{try{const s={url:`/removefruitsClubWeight/${e}/${t}`,method:"delete",baseURL:"https://majesticmall.net/api/admin",headers:{"content-type":"application/json"},headers:{Authorization:`Bearer ${i}`}};if(200!==(await(0,P.A)(s)).status)throw new Error("Failed to delete image");l.Ay.success("Successfully removed"),window.location.reload()}catch(s){s.response?l.Ay.error(s.response.data.error):l.Ay.error("Something Wrong")}})(null===dt||void 0===dt?void 0:dt._id,null===e||void 0===e?void 0:e._id),color:"error",children:(0,X.jsx)(v.A,{})})]})},e.id)))]})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsxs)(D.A,{sx:{p:3},children:[(0,X.jsx)(r.A,{variant:"h6",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Product Description"}),(0,X.jsx)(H.aF,{editor:Q(),data:Me||(null===dt||void 0===dt?void 0:dt.description),onChange:(e,t)=>{const i=t.getData();Te(i)}})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsxs)(D.A,{sx:{p:3},children:[(0,X.jsx)(r.A,{variant:"h6",gutterBottom:!0,style:{marginBottom:"20px",marginRight:"auto",fontWeight:"900"},children:"Product Images"}),(0,X.jsxs)(ie,{...et(),children:[(0,X.jsx)("input",{...tt()}),(0,X.jsx)(p.A,{size:40,className:"mx-auto mb-2"}),(0,X.jsx)(r.A,{children:"Drag & drop files here, or click to select files"}),(0,X.jsx)(r.A,{variant:"body2",color:"textSecondary",children:"Supports images and videos"})]}),it.length>0&&(0,X.jsx)(F.Ay,{container:!0,spacing:2,children:it.map(((e,t)=>(0,X.jsx)(F.Ay,{item:!0,xs:6,sm:4,md:3,children:(0,X.jsx)(o.A,{children:(0,X.jsxs)(V.A,{sx:{position:"relative"},children:[e.type.startsWith("video/")?(0,X.jsx)("video",{src:URL.createObjectURL(e),controls:!0,style:{width:"100%",height:"200px",objectFit:"cover"}}):(0,X.jsx)(V.A,{component:"img",src:URL.createObjectURL(e),alt:`Upload ${t+1}`,sx:{width:"100%",height:"200px",objectFit:"cover"}}),(0,X.jsx)(G.A,{sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(255, 255, 255, 0.8)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.9)"}},onClick:()=>{const e=[...it];e.splice(t,1),st(e)},children:(0,X.jsx)(v.A,{size:20})})]})})},t)))})]})}),(0,X.jsx)(F.Ay,{item:!0,xs:12,children:(0,X.jsx)(V.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,X.jsx)(c.Ay,{variant:"contained",size:"large",onClick:async()=>{try{const e={url:`/updatefruits/${null===dt||void 0===dt?void 0:dt._id}`,method:"post",baseURL:"https://majesticmall.net/api/admin",headers:{"content-type":"application/json"},headers:{Authorization:`Bearer ${i}`},data:{productname:Ae,price:je,description:Me,category:be,subcategory:Se,tag:we,discount:ke,clubdiscount:Pe,stock:Be,unit:Ue,miniunit:De,ministock:Ie,weight:At,subscribe:Le,Clubweight:At}};await(0,P.A)(e).then((e=>{var t;200===e.status&&yt(null===(t=e.data.fruits)||void 0===t?void 0:t._id)}))}catch(e){l.Ay.success(e.response.data.error)}},startIcon:(0,X.jsx)(C.A,{}),style:{backgroundColor:"#000",color:"white"},children:"Update"})})})]})})]}),(0,X.jsx)(u.A,{title:"Confirm Delete",visible:ot,onCancel:()=>lt(!1),onOk:()=>(async e=>{try{await P.A.delete(`https://majesticmall.net/api/admin/deletefruits/${e}`,{headers:{Authorization:`Bearer ${i}`}}),l.Ay.success("Product deleted successfully"),pt(),lt(!1)}catch(t){l.Ay.error("Failed to delete product")}})(null===dt||void 0===dt?void 0:dt._id),okText:"Delete",okButtonProps:{danger:!0},children:(0,X.jsx)("p",{children:"Are you sure you want to delete this product?"})}),(0,X.jsx)(u.A,{title:"Product Images",visible:nt,onCancel:()=>ct(!1),footer:null,width:800,children:(0,X.jsx)("div",{className:"grid grid-cols-3 gap-4",children:null===dt||void 0===dt||null===(e=dt.Photos)||void 0===e?void 0:e.map(((e,t)=>(0,X.jsxs)("div",{className:"relative",children:[e.file.match(/\.(jpg|jpeg|png|gif)$/i)?(0,X.jsx)("img",{src:`https://majesticmall.net/product/${e.file}`,alt:`Product ${t+1}`,className:"w-full h-40 object-cover rounded",loading:"lazy",onError:e=>{e.target.src="../img/example.jpg"}}):(0,X.jsx)("video",{src:`https://majesticmall.net/product/${e.file}`,className:"w-full h-40 object-cover rounded",controls:!0}),(0,X.jsx)(c.Ay,{type:"text",danger:!0,icon:(0,X.jsx)(f.A,{size:16}),className:"absolute top-2 right-2",onClick:()=>{}})]},t)))})})]})}}}]);
//# sourceMappingURL=6105.ec4a9580.chunk.js.map