"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[2272],{77590:(e,t,o)=>{o.d(t,{A:()=>s});var i=o(65043),l=o(70579);const s=e=>{let{message:t,show:o,onClose:s}=e;return(0,i.useEffect)((()=>{if(o){const e=setTimeout((()=>{s()}),5e3);return()=>clearTimeout(e)}}),[o,s]),o?(0,l.jsx)("div",{className:"notification-banner",children:(0,l.jsx)("p",{children:t})}):null}},52272:(e,t,o)=>{o.r(t),o.d(t,{default:()=>O});var i=o(65043),l=o(83003),s=o(73216),d=o(35475),n=o(86213),r=o(80229),c=o(78745),a=o(87923),u=o(12110),v=o(43845),g=o(63336),h=o(54669),p=o(24056),x=o(15316),m=o(56174),b=o(71360),f=o(51419),y=o(28646),j=o(11178),w=o(22019),N=o(37490),A=o(77590),_=o(1880),C=o(86111),k=o.n(C),S=o(70579);const O=()=>{var e,t,o,C,O,T;const E=(0,l.wA)(),$=(0,s.Zp)(),z=(0,s.g)(),J=(0,l.d4)((e=>e.cart)),R=(0,l.d4)((e=>e.cart1));let F=_.A.get("AllTextHead");const W="Abhinanadan02",B=_.A.get("token"),P=B?k().AES.decrypt(B,W).toString(k().enc.Utf8):null,M=_.A.get("user"),L=M?JSON.parse(k().AES.decrypt(M,W).toString(k().enc.Utf8)):null,U=_.A.get("AllText"),Y=U?JSON.parse(k().AES.decrypt(U,W).toString(k().enc.Utf8)):null,[X,q]=(0,i.useState)([]),[V,D]=(0,i.useState)({}),[G,H]=(0,i.useState)(""),[Z,I]=(0,i.useState)(0),[K,Q]=(0,i.useState)([]),[ee,te]=(0,i.useState)([]);(0,i.useEffect)((()=>{le(),(async()=>{try{const t=await n.A.get("https://majesticmall.net/api/admin/getCategory",{headers:{Authorization:`Bearer ${P}`}});var e;200===t.status&&Q(null===(e=t.data)||void 0===e?void 0:e.category.filter((e=>"Active"===e.status)))}catch(t){console.error("Error fetching categories:",t)}})(),(async()=>{try{const t=await n.A.get("https://majesticmall.net/api/admin/getSubcategory",{headers:{Authorization:`Bearer ${P}`}});var e;200===t.status&&te(null===(e=t.data)||void 0===e?void 0:e.Subcategory.filter((e=>"Active"===e.status)))}catch(t){console.error("Error fetching subcategories:",t)}})()}),[]);const[oe,ie]=(0,i.useState)([]),le=async()=>{try{const e=await n.A.get("https://majesticmall.net/api/admin/Getproductlist",{headers:{Authorization:`Bearer ${P}`}});if(200===e.status){const t=e.data.ProductList.filter((e=>"Active"===e.status));q(t),ie(t);const o={};t.forEach((e=>{var t,i;o[e._id]=null!==L&&void 0!==L&&L.club?null===(i=e.Clubweight)||void 0===i?void 0:i[0]:null===(t=e.weight)||void 0===t?void 0:t[0]})),D(o)}}catch(e){console.error("Error fetching products:",e)}},[se,de]=(0,i.useState)({}),ne=null===X||void 0===X?void 0:X.find((e=>(null===e||void 0===e?void 0:e._id)===z.id)),re=V[null===ne||void 0===ne?void 0:ne._id],ce=se[null===ne||void 0===ne?void 0:ne._id]||1;(0,i.useEffect)((()=>{var e,t;(null===ne||void 0===ne||null===(e=ne.Photos)||void 0===e?void 0:e.length)>0&&H(null===(t=ne.Photos[0])||void 0===t?void 0:t.file)}),[ne]);const ae=(e,t)=>{if(e.stock-(null===e||void 0===e?void 0:e.sellproduct)<=0||e.stock-(null===e||void 0===e?void 0:e.sellproduct)<t)return w.Ay.error("Out of stock");de((o=>({...o,[e._id]:Math.max((o[e._id]||1)+t,1)})))},[ue,ve]=(0,i.useState)({show:!1,message:""}),ge=e=>{L?($(`/subscribe/${e._id}`,{state:{selectedWeight:V[e._id]}}),window.scrollTo({top:0,behavior:"smooth"})):c.oR.info("Please login to subscribe")},[he,pe]=(0,i.useState)({}),[xe,me]=(0,i.useState)({display:"none"}),be=null===K||void 0===K?void 0:K.find((e=>"Fruits & Vegetables"==(null===e||void 0===e?void 0:e.categoryName))),fe=e=>{if(e.stock-(null===e||void 0===e?void 0:e.sellproduct)<=0)return w.Ay.error("Out of stock");if(0==Object.keys(e).length)return w.Ay.error("Product not found");e.weight[0].discount=null===e||void 0===e?void 0:e.discount,e.Clubweight[0].discount=null===e||void 0===e?void 0:e.clubdiscount;const t=V[e._id]||(null!==L&&void 0!==L&&L.club?e.Clubweight[0]:e.weight[0]),o=se[e._id]||1;w.Ay.success(`Success: You have added ${null===e||void 0===e?void 0:e.productname} to your cart!`),(null===be||void 0===be?void 0:be._id)==(null===e||void 0===e?void 0:e.category)?E((0,j.mV)({...e,selectedWeight:t,quantity:o})):E((0,a.bE)({...e,selectedWeight:t,quantity:o}))},ye=e=>{const t=V[e._id]||(null!==L&&void 0!==L&&L.club?e.Clubweight[0]:e.weight[0]);(null===be||void 0===be?void 0:be._id)==(null===e||void 0===e?void 0:e.category)?E((0,j.ul)({_id:e._id,selectedWeight:t})):E((0,a.dt)({_id:e._id,selectedWeight:t})),de((t=>({...t,[e._id]:Math.max((t[e._id]||0)-1,0)})))},je=e=>{(null===be||void 0===be?void 0:be._id)==(null===e||void 0===e?void 0:e.category)?$(`/shop-detail1/${null===e||void 0===e?void 0:e._id}`):$(`/shop-detail/${null===e||void 0===e?void 0:e._id}`),window.scrollTo({top:0,behavior:"smooth"})};if((0,i.useEffect)((()=>{const e=e=>{const t=e.touches[0];if(!t)return;const o=e.currentTarget.getBoundingClientRect(),i=(t.clientX-o.left)/o.width*100,l=(t.clientY-o.top)/o.height*100;pe({transformOrigin:`${i}% ${l}%`,transform:"scale(2)"}),me({display:"block",top:t.clientY-o.top-50+"px",left:t.clientX-o.left-50+"px"})},t=()=>{pe({transform:"scale(1)",transformOrigin:"center center"}),me({display:"none"})};return document.addEventListener("touchmove",e),document.addEventListener("touchend",t),()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t)}}),[]),!ne)return null;const we=e=>{var t;return(null===be||void 0===be?void 0:be._id)==(null===e||void 0===e?void 0:e.category)?null===R||void 0===R||null===(t=R.items1)||void 0===t?void 0:t.some((t=>t._id===e._id)):null===J||void 0===J?void 0:J.items.some((t=>t._id===e._id))},Ne=we(ne),Ae=null===(e=K.filter((e=>e._id===(null===ne||void 0===ne?void 0:ne.category)))[0])||void 0===e?void 0:e.categoryName,_e=null===(t=ee.filter((e=>e._id===(null===ne||void 0===ne?void 0:ne.subcategory)))[0])||void 0===t?void 0:t.SubcategoryName;return(0,S.jsxs)("div",{className:"p-4 mx-auto max-w-7xl",children:[(0,S.jsx)(c.N9,{}),(0,S.jsx)(A.A,{message:ue.message,show:ue.show,onClose:()=>ve({...ue,show:!1})}),(0,S.jsxs)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsx)(u.A,{className:"overflow-hidden relative w-[100%]",children:(0,S.jsxs)("div",{className:"relative bg-white",onMouseMove:e=>{const t=e.currentTarget.getBoundingClientRect(),o=(e.clientX-t.left)/t.width*100,i=(e.clientY-t.top)/t.height*100;pe({transformOrigin:`${o}% ${i}%`,transform:"scale(2)"}),me({display:"block",top:e.clientY-t.top-50+"px",left:e.clientX-t.left-50+"px"})},onMouseLeave:()=>{pe({transform:"scale(1)",transformOrigin:"center center"}),me({display:"none"})},style:{overflow:"hidden",height:"420px"},children:[(0,S.jsx)("img",{src:`https://majesticmall.net/product/${G}`,alt:null===ne||void 0===ne?void 0:ne.productname,loading:"lazy",className:"object-contain transition-transform duration-300",style:{width:"100%",height:"100%",...he},onError:e=>{e.target.src="../img/example.jpg"}}),(0,S.jsx)("div",{className:"absolute w-24 h-24 bg-black rounded-full pointer-events-none opacity-30",style:{position:"absolute",...xe}}),(null===ne||void 0===ne?void 0:ne.tag)&&(0,S.jsx)("span",{className:"absolute flex items-center gap-1 px-3 py-1 text-sm text-white rounded-full top-4 left-4",style:{backgroundColor:"#000"},children:null===ne||void 0===ne?void 0:ne.tag})]})}),(0,S.jsx)("div",{className:"flex gap-2 pb-2 overflow-x-auto",children:null===ne||void 0===ne||null===(o=ne.Photos)||void 0===o?void 0:o.map(((e,t)=>(0,S.jsx)("button",{onClick:()=>H(e.file),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all\n                  "+(G===e.file?"border-primary opacity-100":"border-transparent opacity-60 hover:opacity-100"),children:(0,S.jsx)("img",{src:`https://majesticmall.net/product/${e.file}`,alt:"photos",className:"object-cover w-full h-full",loading:"lazy",onError:e=>{e.target.src="../img/example.jpg"}})},t)))})]}),(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{className:"mb-2 text-2xl font-semibold",children:null===ne||void 0===ne?void 0:ne.productname}),(0,S.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row ",children:[(0,S.jsx)(v.A,{label:"Category : "+Ae,sx:{mr:1,mb:1},style:{backgroundColor:"white"}}),(0,S.jsx)(v.A,{label:"Sub-Category : "+_e,sx:{mb:1},style:{backgroundColor:"white"}})]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsxs)("select",{name:"option[504]",id:"input-option504",className:"w-full p-2 border rounded-lg bg-background",style:{maxWidth:"200px"},onChange:e=>{const t=JSON.parse(e.target.value),o="discount"===t.discountType?null===ne||void 0===ne?void 0:ne.discount:null===ne||void 0===ne?void 0:ne.clubdiscount;D((e=>({...e,[ne._id]:{...t,discount:o,discountType:null===t||void 0===t?void 0:t.discountType}})))},value:JSON.stringify(re),children:[!(null!==L&&void 0!==L&&L.club)&&(null===(C=ne.weight)||void 0===C?void 0:C.map((e=>(0,S.jsxs)("option",{value:JSON.stringify({...e,discount:null===ne||void 0===ne?void 0:ne.discount,discountType:"discount"}),children:[e.value," ",e.units," - Rs"," ",(e.price-e.price*((null===ne||void 0===ne?void 0:ne.discount)/100)).toFixed(2)]},`weight-${e.id}`)))),null===(O=ne.Clubweight)||void 0===O?void 0:O.map((e=>(0,S.jsxs)("option",{value:JSON.stringify({...e,discount:null===ne||void 0===ne?void 0:ne.clubdiscount,discountType:"clubdiscount"}),disabled:!L||!1===L.club,style:{color:L&&!1!==L.club?"inherit":"#aaa"},children:[e.value," ",e.units," - Rs"," ",(e.price-e.price*((null===ne||void 0===ne?void 0:ne.clubdiscount)/100)).toFixed(2),!(null!==L&&void 0!==L&&L.club)&&" (Club Members Only)"]},`clubweight-${e.id}`)))]}),ne.stock-(null===ne||void 0===ne?void 0:ne.sellproduct)<=0?null:(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"flex items-center gap-4 w-100",children:(0,S.jsxs)("div",{className:"flex items-center gap-2 p-1 bg-white border rounded-lg",children:[(0,S.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ye(ne):ne.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):ye(ne)},className:"p-1 rounded hover:bg-gray-100",children:(0,S.jsx)(m.A,{size:16})}),(0,S.jsx)("span",{className:"w-8 text-center",children:ce}),(0,S.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ae(ne,1):ne.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):ae(ne,1)},className:"p-1 rounded hover:bg-gray-100",children:(0,S.jsx)(b.A,{size:16})})]})})})]}),ne.stock-(null===ne||void 0===ne?void 0:ne.sellproduct)<=0?(0,S.jsx)("p",{style:{color:"red",paddingTop:"27px",textAlign:"center",fontWeight:"500"},children:"Out of Stock"}):(0,S.jsxs)("div",{className:"flex items-start justify-start gap-4",children:[Ne?(0,S.jsxs)("button",{onClick:()=>fe(ne),className:"flex items-start justify-start gap-2 px-4 py-2 text-white rounded-lg hover:bg-primary/90",style:{backgroundColor:"#f7ab27"},children:[(0,S.jsx)(f.A,{size:18}),"Update"]}):(0,S.jsxs)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?fe(ne):ne.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):fe(ne)},className:"flex items-start justify-start gap-2 px-2 py-2 text-white rounded-lg lg:px-4 hover:bg-primary/90 ",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||ne.category!=(null===be||void 0===be?void 0:be._id)?"#000":F?"rgb(204 225 166)":"#000"},children:[(0,S.jsx)(f.A,{size:18}),"Add to Cart"]}),"Subscription"===ne.subscribe&&(0,S.jsxs)("button",{onClick:()=>ge(ne),className:"flex items-center justify-center flex-1 gap-2 px-4 py-2 border rounded-lg border-primary hover:bg-primary/5",style:{color:"white",backgroundColor:"#0c363b"},children:[(0,S.jsx)(y.A,{size:18}),"Subscribe"]})]}),(0,S.jsxs)(g.A,{elevation:3,sx:{p:3},children:[(0,S.jsx)(h.A,{value:Z,onChange:(e,t)=>I(t),children:(0,S.jsx)(p.A,{label:"Description",style:{color:"#000",borderBottomColor:"#000"}})}),(0,S.jsx)(x.A,{sx:{mt:2},children:null!==ne&&void 0!==ne&&ne.description?(0,r.Ay)(null===ne||void 0===ne?void 0:ne.description):""})]})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"mx-5 mt-10 mb-4 text-3xl font-bold",style:{color:"#45595b"},children:"Recently added products"}),(0,S.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:null===oe||void 0===oe||null===(T=oe.slice(0,5))||void 0===T?void 0:T.map((e=>{var t,o,i,l;const s=V[e._id],n=se[e._id]||1,r=we(e);return(0,S.jsxs)("div",{className:"box border rounded-lg border-#f7ab27-400 mx-auto w-full  max-w-xs shadow-lg hover:shadow-xl transition-shadow duration-300 bg-white",style:{height:"300px",marginBottom:"5px"},children:[(0,S.jsx)(N.A.Ribbon,{text:e.tag,color:"#f7ab27",children:(0,S.jsx)("div",{className:"relative overflow-clip",children:(0,S.jsx)("img",{className:"w-full transition-transform duration-500 ease-in-out rounded-lg shadow-lg hover:scale-105",src:`https://majesticmall.net/product/${null===e||void 0===e||null===(t=e.Photos[0])||void 0===t?void 0:t.file}`,alt:"Product",loading:"lazy",style:{height:"130px",width:"350px",marginTop:"10px",cursor:"pointer",objectFit:"contain",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>je(e),onError:e=>{e.target.src="../img/example.jpg"}})})}),(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)(d.N_,{to:`/shop-detail/${e._id}`,children:(0,S.jsx)("h3",{className:"mt-4 font-semibold text-l",style:{color:"#45595b"},onClick:()=>je(e),children:null===e||void 0===e||null===(o=e.productname)||void 0===o?void 0:o.slice(0,20)})}),(0,S.jsxs)("select",{name:"option[504]",id:"input-option504",className:"form-control1 weight resp-select-box",style:{maxWidth:"200px",fontSize:"12px",border:"1px solid #88ac46"},onChange:t=>{const o=JSON.parse(t.target.value),i="discount"===o.discountType?e.discount:e.clubdiscount;D((t=>({...t,[e._id]:{...o,discount:i,discountType:o.discountType}})))},value:JSON.stringify(s),children:[!(null!==L&&void 0!==L&&L.club)&&(null===(i=e.weight)||void 0===i?void 0:i.map((t=>(0,S.jsxs)("option",{style:{fontSize:"12px"},value:JSON.stringify({...t,discount:e.discount,discountType:"discount"}),children:[t.value," ",t.units," - Rs",(t.price-t.price*(e.discount/100)).toFixed(2)]},`weight-${t.id}`)))),null===(l=e.Clubweight)||void 0===l?void 0:l.map((t=>(0,S.jsxs)("option",{value:JSON.stringify({...t,discount:e.clubdiscount,discountType:"clubdiscount"}),disabled:!L||!1===L.club,style:{color:L&&!1!==L.club?"inherit":"#aaa",fontSize:"12px"},children:[t.value," ",t.units," - Rs"," ",(t.price-t.price*(e.clubdiscount/100)).toFixed(2)," ",!(null!==L&&void 0!==L&&L.club)&&" (Club Members Only)"]},`clubweight-${t.id}`)))]})]}),e.stock-(null===e||void 0===e?void 0:e.sellproduct)<=0?(0,S.jsx)("p",{style:{color:"red",paddingTop:"27px",textAlign:"center",fontWeight:"500"},children:"Out of Stock"}):(0,S.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,S.jsx)("div",{className:"flex justify-center flex-grow",children:"Subscription"===(null===e||void 0===e?void 0:e.subscribe)?(0,S.jsxs)(S.Fragment,{children:[r?(0,S.jsx)("button",{onClick:()=>fe(e),className:"px-3 py-1 text-xs font-semibold text-white rounded-2xl",style:{backgroundColor:"#f7ab27",color:"#fff"},children:"Update cart"}):(0,S.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category?fe(e):e.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):fe(e)},className:"px-3 py-1 text-xs font-semibold text-white rounded-2xl",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||e.category!=(null===be||void 0===be?void 0:be._id)?"#000":F?"rgb(204 225 166)":"#000",color:"#fff"},children:"Buy Once"})," "]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"flex items-center mr-2",children:[(0,S.jsx)("button",{className:"lg:text-lg md:text-md sm:text-sm font-semibold bg-[#ffb524] text-white rounded-full size-7 flex justify-center items-center ",onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ye(e):e.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):ye(e)},children:"-"}),(0,S.jsx)("span",{className:"px-3",children:n}),(0,S.jsx)("button",{className:"lg:text-lg md:text-md sm:text-sm font-semibold bg-[#ffb524] text-white rounded-full size-7 flex justify-center items-center ",onClick:()=>{null!==Y&&void 0!==Y&&Y.category?ae(e,1):e.category==(null===be||void 0===be?void 0:be._id)&&F?w.Ay.error(F):ae(e,1)},children:"+"})]}),r?(0,S.jsx)("button",{onClick:()=>fe(e),className:"font-semibold px-3 py-2 text-xs truncate text-white rounded-full bg-[#f7ab27]",children:"Update cart"}):(0,S.jsx)("button",{onClick:()=>{null!==Y&&void 0!==Y&&Y.category||e.category!=(null===be||void 0===be?void 0:be._id)?fe(e):F?w.Ay.error(F):fe(e)},className:"px-3 py-2 text-xs font-semibold text-white rounded-full ",style:{backgroundColor:null!==Y&&void 0!==Y&&Y.category||e.category!=(null===be||void 0===be?void 0:be._id)?"#000":F?"rgb(204 225 166)":"#000",color:"#fff"},children:"Add to cart"})]})}),"Subscription"===e.subscribe&&(0,S.jsx)("button",{onClick:()=>ge(e),className:"px-3 py-1 text-xs font-semibold text-white rounded-2xl",style:{backgroundColor:"#0c363b",marginRight:"15px"},children:"Subscribe"})]})]},e._id)}))})]})]})}}}]);
//# sourceMappingURL=2272.60467ba8.chunk.js.map