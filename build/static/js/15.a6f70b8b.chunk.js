(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[15],{34074:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>F});var t=l(65043),r=l(46909),i=l(23927),d=l(59748),s=l(22019),n=l(6051),m=l(3188),c=l(27210),o=l(49757),h=l(94434),x=l(64325),u=l(1118),y=l(62058),v=l(75337),j=l(26533),A=l(9855),p=l(1457),g=l(86213),T=l(11238),f=l(1880),b=l(86111),C=l.n(b),w=l(86178),k=l.n(w),D=(l(26004),l(70579));const{confirm:I}=r.A,S="https://majesticmall.net/api/admin",{Title:N}=i.A,F=()=>{const e=f.A.get("token"),a=e?C().AES.decrypt(e,"Abhinanadan02").toString(C().enc.Utf8):null,[l,i]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[F,K]=(0,t.useState)(!1),[O,H]=(0,t.useState)(null),[E]=d.A.useForm(),[_,M]=(0,t.useState)(""),[$,V]=(0,t.useState)([]);(0,t.useEffect)((()=>{q()}),[]),(0,t.useEffect)((()=>{V(null===l||void 0===l?void 0:l.filter((e=>Object.values(e).some((e=>e&&e.toString().toLowerCase().includes(_.toLowerCase()))))))}),[l,_]);const q=async()=>{try{var e;const l=await g.A.get(`${S}/getText`,{headers:{Authorization:`Bearer ${a}`}});i((null===(e=l.data)||void 0===e?void 0:e.Text)||[])}catch(l){s.Ay.error("Failed to fetch texts")}},z=[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}],P=async e=>{try{await g.A.delete(`${S}/deletetext/${e}`,{headers:{Authorization:`Bearer ${a}`}}),s.Ay.success("Text deleted successfully"),q()}catch(l){s.Ay.error("Failed to delete text")}},[B,W]=(0,t.useState)({current:1,pageSize:10}),U=[{title:"S No.",key:"serialNo",render:(e,a,l)=>(B.current-1)*B.pageSize+l+1},{title:"Text",key:"text",render:e=>(0,D.jsx)("p",{style:{width:"200px"},children:null===e||void 0===e?void 0:e.text})},{title:"From Date",dataIndex:"fromDay",key:"fromDay"},{title:"From Time",dataIndex:"fromTime",key:"fromTime"},{title:"To Day",dataIndex:"toDay",key:"toDay"},{title:"End Time",dataIndex:"endTime",key:"endTime"},{title:"Min Order \u20b9.",dataIndex:"minOrder",key:"minOrder"},{title:"Delivery Charge",dataIndex:"deliveryCharge",key:"deliveryCharge"},{title:"Min Km",dataIndex:"minKm",key:"minKm"},{title:"Extra Per Km Charge",dataIndex:"perKmCharge",key:"perKmCharge"},{title:"Action",key:"action",render:(e,l)=>(0,D.jsxs)(n.A,{children:[(0,D.jsx)(m.Ay,{type:"text",icon:(0,D.jsx)(j.A,{color:"blue"}),onClick:()=>{H(l),K(!0),E.setFieldsValue({text:l.text,category:l.category,fromDay:l.fromDay,toDay:l.toDay,fromTime:l.fromTime&&k()(l.fromTime,"HH:mm"),endTime:l.endTime&&k()(l.endTime,"HH:mm"),deliveryCharge:l.deliveryCharge,minOrder:null===l||void 0===l?void 0:l.minOrder,minKm:null===l||void 0===l?void 0:l.minKm,perKmCharge:null===l||void 0===l?void 0:l.perKmCharge})}}),(0,D.jsx)(m.Ay,{type:"text",icon:(0,D.jsx)(A.A,{color:"red"}),onClick:()=>{return e=l._id,void I({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){P(e)},onCancel(){}});var e}}),(0,D.jsx)(m.Ay,{type:!0===l.isActive?"primary":"danger",onClick:()=>(async e=>{try{const l={url:`/admin/makeactivedeactivetext/${e}`,method:"put",baseURL:"https://majesticmall.net/api",hearder:{"content-type":"application/json"},headers:{Authorization:`Bearer ${a}`}};200===(await(0,g.A)(l)).status&&(s.Ay.success("Successfully Updated"),q())}catch(l){console.error("Error deleting delivery charges:",l),s.Ay.error("Failed to update")}})(null===l||void 0===l?void 0:l._id),children:!0===l.isActive?"Active":"Inactive"})]})}];return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,D.jsx)(N,{level:3,className:"title",children:"Texts"}),(0,D.jsxs)(n.A,{children:[(0,D.jsx)(c.A,{placeholder:"Search texts",prefix:(0,D.jsx)(y.A,{}),value:_,onChange:e=>M(e.target.value)}),(0,D.jsx)(m.Ay,{type:"primary",icon:(0,D.jsx)(v.A,{}),onClick:()=>w(!0),children:"Add Text"}),(0,D.jsx)(m.Ay,{type:"primary",icon:(0,D.jsx)(p.A,{size:16}),onClick:()=>{const e=$.map((e=>{let{_id:a,text:l}=e;return{Text:l}})),a=T.Wp.json_to_sheet(e),l=T.Wp.book_new();T.Wp.book_append_sheet(l,a,"Texts"),T._h(l,"texts.xlsx")},children:"Export to Excel"})]})]}),(0,D.jsx)(o.A,{columns:U,dataSource:$,rowKey:"_id",scroll:{x:"max-content"},pagination:{...B,onChange:(e,a)=>{W({current:e,pageSize:a})}},components:{header:{cell:e=>(0,D.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}}),(0,D.jsx)(r.A,{text:"Add Text",visible:b,onCancel:()=>w(!1),footer:null,children:(0,D.jsxs)(d.A,{form:E,onFinish:async e=>{try{await g.A.post(`${S}/addText`,{text:null===e||void 0===e?void 0:e.text,category:"Fruits & Vegetables",fromDay:e.fromDay,toDay:e.toDay,fromTime:null===e||void 0===e?void 0:e.fromTime.format("HH:mm"),endTime:null===e||void 0===e?void 0:e.endTime.format("HH:mm"),deliveryCharge:e.deliveryCharge,minOrder:null===e||void 0===e?void 0:e.minOrder,minKm:null===e||void 0===e?void 0:e.minKm,perKmCharge:null===e||void 0===e?void 0:e.perKmCharge},{headers:{Authorization:`Bearer ${a}`}}),s.Ay.success("Text added successfully"),w(!1),E.resetFields(),q()}catch(l){s.Ay.error("Failed to add text")}},layout:"vertical",children:[(0,D.jsx)(d.A.Item,{name:"category",label:"Category",children:(0,D.jsx)(h.A,{defaultValue:"Fruits & Vegetables",children:(0,D.jsx)(h.A.Option,{value:"Fruits & Vegetables",children:"Fruits & Vegetables"})})}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"fromDay",label:"From Day",rules:[{required:!0,message:"Please select a start day"}],children:(0,D.jsx)(h.A,{placeholder:"Select a start day",children:z.map((e=>(0,D.jsx)(h.A.Option,{value:e.value,children:e.label},e.value)))})})}),(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"fromTime",label:"From Time",rules:[{required:!0}],children:(0,D.jsx)(x.A,{format:"HH:mm"})})})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"toDay",label:"To Day",rules:[{required:!0,message:"Please select an end day"}],children:(0,D.jsx)(h.A,{placeholder:"Select an end day",children:z.map((e=>(0,D.jsx)(h.A.Option,{value:e.value,children:e.label},e.value)))})})}),(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"endTime",label:"End Time",rules:[{required:!0}],children:(0,D.jsx)(x.A,{format:"HH:mm"})})})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"minOrder",label:"Minimum Order Price",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Minimum order price"})})]}),(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"deliveryCharge",label:"Delivery Charge",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Delivery Charge"})})]})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"minKm",label:"Minimum Km",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Minimum km"})})]}),(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"perKmCharge",label:"Per Km Charge",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Extra per km charge"})})]})]}),(0,D.jsx)(d.A.Item,{name:"text",label:"Text (Selected days,time and delivery chages should match wtith the text)",rules:[{required:!0}],children:(0,D.jsx)(c.A,{placeholder:"Selected days,time and delivery chages should match wtith the text"})}),(0,D.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Add Text"})]})}),(0,D.jsx)(r.A,{title:"Edit Text",visible:F,onCancel:()=>K(!1),footer:null,children:(0,D.jsxs)(d.A,{form:E,onFinish:async e=>{try{await g.A.put(`${S}/editText/${O._id}`,{text:e.text,category:"Fruits & Vegetables",fromDay:e.fromDay,toDay:e.toDay,fromTime:e.fromTime.format("HH:mm"),endTime:e.endTime.format("HH:mm"),deliveryCharge:e.deliveryCharge,minOrder:null===e||void 0===e?void 0:e.minOrder,minKm:null===e||void 0===e?void 0:e.minKm,perKmCharge:null===e||void 0===e?void 0:e.perKmCharge},{headers:{Authorization:`Bearer ${a}`}}),s.Ay.success("Text updated successfully"),K(!1),E.resetFields(),q()}catch(l){s.Ay.error("Failed to update text")}},layout:"vertical",children:[(0,D.jsx)(d.A.Item,{name:"category",label:"Category",children:(0,D.jsx)(h.A,{defaultValue:"Fruits & Vegetables",children:(0,D.jsx)(h.A.Option,{value:"Fruits & Vegetables",children:"Fruits & Vegetables"})})}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"fromDay",label:"From Day",rules:[{required:!0,message:"Please select a start day"}],children:(0,D.jsx)(h.A,{placeholder:"Select a start day",children:z.map((e=>(0,D.jsx)(h.A.Option,{value:e.value,children:e.label},e.value)))})})}),(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"fromTime",label:"From Time",rules:[{required:!0}],children:(0,D.jsx)(x.A,{format:"HH:mm"})})})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"toDay",label:"To Day",rules:[{required:!0,message:"Please select an end day"}],children:(0,D.jsx)(h.A,{placeholder:"Select an end day",children:z.map((e=>(0,D.jsx)(h.A.Option,{value:e.value,children:e.label},e.value)))})})}),(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsx)(d.A.Item,{name:"endTime",label:"End Time",rules:[{required:!0}],children:(0,D.jsx)(x.A,{format:"HH:mm"})})})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"minOrder",label:"Minimum Order Price",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Minimum order price"})})]}),(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"deliveryCharge",label:"Delivery Charge",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Delivery Charge"})})]})]}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"minKm",label:"Minimum Km",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Minimum km"})})]}),(0,D.jsxs)("div",{className:"col-md-6",children:["  ",(0,D.jsx)(d.A.Item,{name:"perKmCharge",label:"Per Km Charge",children:(0,D.jsx)(u.A,{min:0,style:{width:"100%"},placeholder:"Extra per km charge"})})]})]}),(0,D.jsx)(d.A.Item,{name:"text",label:"Text (Selected days,time and delivery chages should match wtith the text)",rules:[{required:!0}],children:(0,D.jsx)(c.A,{placeholder:"Selected days,time and delivery chages should match wtith the text"})}),(0,D.jsx)(m.Ay,{type:"primary",htmlType:"submit",children:"Update Text"})]})})]})}},42634:()=>{}}]);
//# sourceMappingURL=15.a6f70b8b.chunk.js.map