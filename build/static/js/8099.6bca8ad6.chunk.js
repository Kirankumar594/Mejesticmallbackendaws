"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[8099],{68099:(e,t,l)=>{l.r(t),l.d(t,{default:()=>C});var i=l(65043),s=l(23927),r=l(46909),a=l(59748),n=l(22019),o=l(6051),c=l(3188),d=l(27210),u=l(49757),y=l(62058),A=l(75337),h=l(26533),p=l(9855),x=l(1457),j=l(86213),m=l(11238),T=l(1880),f=l(86111),g=l.n(f),k=l(70579);const b="https://majesticmall.net/api/admin",{Title:v}=s.A,{confirm:S}=r.A,C=()=>{const e=T.A.get("token"),t=e?g().AES.decrypt(e,"Abhinanadan02").toString(g().enc.Utf8):null,[l,s]=(0,i.useState)([]),[f,C]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),[F,$]=(0,i.useState)(null),[z]=a.A.useForm(),[E,B]=(0,i.useState)(""),[I,N]=(0,i.useState)([]);(0,i.useEffect)((()=>{W()}),[]),(0,i.useEffect)((()=>{N(l.filter((e=>Object.values(e).some((e=>e&&e.toString().toLowerCase().includes(E.toLowerCase()))))))}),[l,E]);const W=async()=>{try{var e;const l=await j.A.get(`${b}/getTitle`,{headers:{Authorization:`Bearer ${t}`}});s((null===(e=l.data)||void 0===e?void 0:e.Title)||[])}catch(l){n.Ay.error("Failed to fetch titles")}},q=async e=>{try{await j.A.delete(`${b}/deletetitle/${e}`,{headers:{Authorization:`Bearer ${t}`}}),n.Ay.success("Title deleted successfully"),W()}catch(l){n.Ay.error("Failed to delete title")}},[L,O]=(0,i.useState)({current:1,pageSize:10}),P=[{title:"Serial No.",key:"serialNo",render:(e,t,l)=>(L.current-1)*L.pageSize+l+1},{title:"Title",dataIndex:"title",key:"title"},{title:"Action",key:"action",render:(e,t)=>(0,k.jsxs)(o.A,{children:[(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(h.A,{color:"blue"}),onClick:()=>{$(t),_(!0),z.setFieldsValue({title:t.title})}}),(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(p.A,{color:"red"}),onClick:()=>{return e=t._id,void S({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){q(e)},onCancel(){console.log("Deletion cancelled")}});var e}})]})}];return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,k.jsx)(v,{level:3,className:"title",children:"Titles"}),(0,k.jsxs)(o.A,{children:[(0,k.jsx)(d.A,{placeholder:"Search titles",prefix:(0,k.jsx)(y.A,{}),value:E,onChange:e=>B(e.target.value)}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(A.A,{}),onClick:()=>C(!0),children:"Add Title"}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(x.A,{size:16}),onClick:()=>{const e=I.map((e=>{let{_id:t,title:l}=e;return{Title:l}})),t=m.Wp.json_to_sheet(e),l=m.Wp.book_new();m.Wp.book_append_sheet(l,t,"Titles"),m._h(l,"titles.xlsx")},children:"Export to Excel"})]})]}),(0,k.jsx)(u.A,{columns:P,dataSource:I,rowKey:"_id",pagination:{...L,onChange:(e,t)=>{O({current:e,pageSize:t})}},scroll:{x:"max-content"},components:{header:{cell:e=>(0,k.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}}),(0,k.jsx)(r.A,{title:"Add Title",visible:f,onCancel:()=>C(!1),footer:null,children:(0,k.jsxs)(a.A,{form:z,onFinish:async e=>{try{await j.A.post(`${b}/addTitle`,{title:e.title},{headers:{Authorization:`Bearer ${t}`}}),n.Ay.success("Title added successfully"),C(!1),z.resetFields(),W()}catch(l){n.Ay.error("Failed to add title")}},layout:"vertical",children:[(0,k.jsx)(a.A.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,k.jsx)(d.A,{})}),(0,k.jsx)(a.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Add Title"})})]})}),(0,k.jsx)(r.A,{title:"Edit Title",visible:w,onCancel:()=>_(!1),footer:null,children:(0,k.jsxs)(a.A,{form:z,onFinish:async e=>{try{await j.A.post(`${b}/editTitle/${F._id}`,{title:e.title},{headers:{Authorization:`Bearer ${t}`}}),n.Ay.success("Title updated successfully"),_(!1),z.resetFields(),W()}catch(l){n.Ay.error("Failed to update title")}},layout:"vertical",children:[(0,k.jsx)(a.A.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,k.jsx)(d.A,{})}),(0,k.jsx)(a.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Update Title"})})]})})]})}}}]);
//# sourceMappingURL=8099.6bca8ad6.chunk.js.map