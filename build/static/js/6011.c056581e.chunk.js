"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[6011],{36011:(e,s,r)=>{r.r(s),r.d(s,{default:()=>A});var t=r(65043),a=r(59748),n=r(22019),l=r(27210);const i=r(28821).A;const o=r(30227).A;var c=r(6036),d=r(3188),u=r(89073),m=r(94733),h=r(1880),p=r(86111),g=r.n(p),x=r(86213),j=r(70579);const A=()=>{const[e]=a.A.useForm(),[s,r]=(0,t.useState)({}),[p,A]=(0,t.useState)(null),b=h.A.get("token"),f=b?g().AES.decrypt(b,"Abhinanadan02").toString(g().enc.Utf8):null;(0,t.useEffect)((()=>{(async()=>{try{let e=await x.A.get("https://majesticmall.net/api/admin/getbussinessprofile");200==e.status&&r(e.data.profile)}catch(e){console.log(e)}})()}),[]);const{TextArea:y}=l.A;return(0,j.jsx)("div",{style:{padding:"20px"},children:(0,j.jsxs)(i,{gutter:32,children:[(0,j.jsxs)(o,{xs:24,md:12,children:[(0,j.jsx)("h2",{children:"Update Business Details"}),(0,j.jsxs)(a.A,{form:e,name:"profile_management",onFinish:async e=>{try{const s={url:"/admin/uploadbusineess",method:"post",baseURL:"https://majesticmall.net/api",hearder:{"content-type":"multipart/form-data"},headers:{Authorization:`Bearer ${f}`},data:{...e,logo:p}};let t=await(0,x.A)(s);200==t.status&&(r(t.data.profile),n.Ay.success("Profile updated successfully!"))}catch(s){console.log(s),n.Ay.error("Failed to update")}},initialValues:s,layout:"vertical",children:[(0,j.jsxs)(a.A.Item,{label:"Business Logo",valuePropName:"fileList",children:[(0,j.jsx)(c.A,{beforeUpload:async e=>{A(e);try{const s=new FormData;s.append("businesslogo",e);const t={url:"/admin/uploadbusineess",method:"post",baseURL:"https://majesticmall.net/api",headers:{Authorization:`Bearer ${f}`},data:s};let a=await(0,x.A)(t);200===a.status&&(r(a.data.profile),n.Ay.success("Profile updated successfully!"))}catch(s){console.error("Error uploading logo:",s),s.response?(console.error("Response Data:",s.response.data),console.error("Response Status:",s.response.status),console.error("Response Headers:",s.response.headers)):s.request?console.error("Request:",s.request):console.error("Error Message:",s.message),n.Ay.error("Failed to update")}return!1},showUploadList:!1,accept:"image/*",children:(0,j.jsx)(d.Ay,{icon:(0,j.jsx)(m.A,{}),children:"Click to Upload Logo"})}),p&&(0,j.jsx)("img",{src:URL.createObjectURL(p),alt:"logo",width:100,style:{marginTop:10},onError:e=>{e.target.src="../img/example.jpg"}})]}),(0,j.jsx)(a.A.Item,{label:"Business Name",name:"businessName",rules:[{message:"Please enter your business name!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"Address",name:"address",rules:[{message:"Please enter your business address!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"Phone Number",name:"phoneNumber",rules:[{message:"Please enter your phone number!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"Email",name:"email",rules:[{message:"Please enter your email!"},{type:"email",message:"Please enter a valid email address!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"Business ID",name:"businessId",rules:[{message:"Please enter your business ID!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"GST Number",name:"gstNumber",rules:[{message:"Please enter your GST number!"}],children:(0,j.jsx)(l.A,{})}),(0,j.jsx)(a.A.Item,{label:"Business Description",name:"description",rules:[{message:"Please provide a business description!"},{max:500,message:"Description must not exceed 500 characters."}],children:(0,j.jsx)(y,{rows:4,placeholder:"Enter your business description here..."})}),(0,j.jsx)(a.A.Item,{children:(0,j.jsx)(d.Ay,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Update Profile"})})]})]}),(0,j.jsx)(o,{xs:24,md:12,children:(0,j.jsxs)(u.A,{title:"Profile Preview",bordered:!0,children:[(0,j.jsx)("div",{style:{marginBottom:"16px",textAlign:"center"},children:s.businesslogo?(0,j.jsx)("img",{src:`https://majesticmall.net/profile/${s.businesslogo}`,alt:"Business Logo",width:120,height:120,style:{borderRadius:"50%",objectFit:"cover"},onError:e=>{e.target.src="../img/example.jpg"}}):(0,j.jsx)("div",{style:{width:120,height:120,borderRadius:"50%",backgroundColor:"#f0f0f0",lineHeight:"120px",textAlign:"center",fontSize:14,color:"#888"},children:"No Logo"})}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Business Name:"})," ",s.businessName||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Address:"})," ",s.address||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Phone Number:"})," ",s.phoneNumber||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Email:"})," ",s.email||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Business ID:"})," ",s.businessId||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"GST Number:"})," ",s.gstNumber||"N/A"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("strong",{children:"Business description "}),(null===s||void 0===s?void 0:s.description)||"N/A"]})]})})]})})}},94733:(e,s,r)=>{r.d(s,{A:()=>o});var t=r(58168),a=r(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var l=r(22172),i=function(e,s){return a.createElement(l.A,(0,t.A)({},e,{ref:s,icon:n}))};const o=a.forwardRef(i)}}]);
//# sourceMappingURL=6011.c056581e.chunk.js.map