"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[6908],{86294:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(65043),s=l(73216);const n=()=>{const e=(0,s.zy)();return(0,a.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}},56908:(e,t,l)=>{l.r(t),l.d(t,{default:()=>h});var a=l(86213),s=l(65043),n=l(78745),r=(l(92342),l(86294)),i=l(1880),o=l(86111),d=l.n(o),c=l(22019),u=l(70579);function h(){var e;const[t,l]=(0,s.useState)(!1),[n,r]=(0,s.useState)(0),[o,c]=(0,s.useState)([]),h="Abhinanadan02",m=i.A.get("user"),x=m?JSON.parse(d().AES.decrypt(m,h).toString(d().enc.Utf8)):null,v=i.A.get("token"),j=v?d().AES.decrypt(v,h).toString(d().enc.Utf8):null;(0,s.useEffect)((()=>{j&&(async()=>{try{var e;const t=await a.A.get(`https://majesticmall.net/api/user/getwallet/${null===x||void 0===x?void 0:x._id}`,{headers:{Authorization:`Bearer ${j}`}});r(t.data.success.balance),c(null===(e=t.data.success.transactions)||void 0===e?void 0:e.reverse())}catch(t){console.error("Error fetching wallet data:",t)}})()}),[j]);const[b,y]=(0,s.useState)(1),f=o.slice(10*(b-1),10*b),g=Math.ceil(o.length/10),A=e=>{"..."!==e&&e>0&&e<=g&&y(e)};return(0,u.jsxs)("div",{className:"w-full lg:w-[60%] main-content mx-auto",children:[(0,u.jsx)("h1",{className:"font-bold uppercase wallet",children:"My Wallet"}),(0,u.jsx)("p",{className:"wallet-description",children:"The Majestic Mall Wallet is a pre-paid credit account that is associated with your Majestic Mall account. This prepaid account allows you to pay a lump sum amount once to Majestic Mall and then shop multiple times without having to pay each time."}),(0,u.jsxs)("div",{className:"balance-section",children:[(0,u.jsxs)("p",{children:["Current Balance: ",(0,u.jsxs)("span",{className:"font-semibold",children:["Rs.",null===n||void 0===n?void 0:n.toFixed(2)]})]}),(0,u.jsx)("button",{className:"font-bold uppercase topup-btn",onClick:()=>l(!0),children:"Topup Your Wallet"})]}),(0,u.jsx)("h2",{className:"my-3 font-bold",children:"Wallet Activity"}),(0,u.jsx)("div",{className:"w-full overflow-x-auto",children:(0,u.jsxs)("table",{className:"wallet-activity",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"SR NO."}),(0,u.jsx)("th",{children:"TRANSACTION ID"}),(0,u.jsx)("th",{children:"DATE"}),(0,u.jsx)("th",{children:"TRANSACTION DETAIL"}),(0,u.jsx)("th",{children:"CREDIT"}),(0,u.jsx)("th",{children:"DEBIT"})]})}),(0,u.jsx)("tbody",{children:f&&f.length>0?(0,u.jsx)(u.Fragment,{children:null===(e=[...f])||void 0===e?void 0:e.map(((e,t)=>{var l;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t+1}),(0,u.jsxs)("td",{children:["ABHI",null===e||void 0===e||null===(l=e._id)||void 0===l?void 0:l.slice(20,25)]}),(0,u.jsx)("td",{children:null!==e&&void 0!==e&&e.date?new Date(null===e||void 0===e?void 0:e.date).toLocaleDateString():"N/A"}),(0,u.jsx)("td",{children:null===e||void 0===e?void 0:e.detail}),(0,u.jsx)("td",{className:"text-sm text-center text-[#000]",children:null!==e&&void 0!==e&&e.credit?`Rs.${null===e||void 0===e?void 0:e.credit}`:"-"}),(0,u.jsx)("td",{className:"text-sm text-center text-red-600",children:null!==e&&void 0!==e&&e.debit?`Rs.${null===e||void 0===e?void 0:e.debit}`:"-"})]},null===e||void 0===e?void 0:e._id)}))}):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"6",className:"text-center",children:"No transactions found"})})})]})}),f&&f.length>0?(0,u.jsx)("div",{className:"flex items-center justify-center",children:(0,u.jsxs)("ul",{className:"flex items-center justify-center mx-2 mt-3 lg:mx-4 next",children:[(0,u.jsx)("li",{className:"border border-#f7ab27-400 rounded-lg cursor-pointer lg:px-4 mx-1 px-2 py-2",style:{color:1===b?"#d1d5db":"#45595b"},onClick:()=>A(b-1),disabled:1===b,children:"\u21d0"}),(()=>{const e=[];return g<=5?[...Array(g).keys()].map((e=>e+1)):(b<=3?e.push(1,2,3,"...",g):b>=g-2?e.push(1,"...",g-2,g-1,g):e.push(1,"...",b-1,b,b+1,"...",g),e)})().map(((e,t)=>(0,u.jsx)("li",{className:"py-2 px-2 lg:px-4 border border-#f7ab27-400 rounded-lg cursor-pointer "+(b===e?"bg-[#000] text-white":"hover:bg-#f7ab27-200"),onClick:()=>A(e),children:e},t))),(0,u.jsx)("li",{className:"border border-#f7ab27-400 rounded-lg cursor-pointer lg:px-4 mx-1 px-2 py-2",style:{color:b===g?"#d1d5db":"#45595b"},onClick:()=>A(b+1),disabled:b===g,children:"\u21d2"})]})}):null,t&&(0,u.jsx)(p,{closeModal:()=>l(!1),setBalance:r,setTransactions:c})]})}function p(e){let{closeModal:t,setBalance:l,setTransactions:o}=e;const[h,p]=(0,s.useState)(""),m="Abhinanadan02",x=i.A.get("token"),v=x?d().AES.decrypt(x,m).toString(d().enc.Utf8):null,j=i.A.get("user"),b=j?JSON.parse(d().AES.decrypt(j,m).toString(d().enc.Utf8)):null;return(0,u.jsxs)("div",{className:"modal2-overlay",children:[(0,u.jsx)(n.N9,{}),(0,u.jsx)(r.A,{}),(0,u.jsxs)("div",{className:"modal2",children:[(0,u.jsx)("h2",{children:"Topup Your Wallet"}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!v)return void c.Ay.error("Please login!");const l=parseFloat(h);if(!h||l<=0)c.Ay.error("Please enter a valid amount.");else if(l<300)c.Ay.error("The minimum top-up amount is Rs. 300.");else try{const e={url:"/user/topup",method:"post",baseURL:"https://majesticmall.net/api",hearder:{"content-type":"application/json"},headers:{Authorization:`Bearer ${v}`},data:{userId:null===b||void 0===b?void 0:b._id,amount:l}},t=await a.A.post("https://majesticmall.net/api/user/addPaymentPhone",{userId:null===b||void 0===b?void 0:b._id,username:null===b||void 0===b?void 0:b.name,Mobile:null===b||void 0===b?void 0:b.mobile,orderId:"Wallet"+Math.random(0,10),amount:l,config:JSON.stringify(e),redirecturl:"/wallet",callBack:"/wallet"},{headers:{Authorization:`Bearer ${v}`}});var s,n;if(200==t.status)return window.location.assign(null===(s=t.data)||void 0===s||null===(n=s.url)||void 0===n?void 0:n.url)}catch(r){console.error("Error topping up the wallet:",r),c.Ay.error("Error during top-up. Please try again.")}finally{t()}},children:[(0,u.jsx)("label",{htmlFor:"amount",children:"Enter Amount (Rs):"}),(0,u.jsx)("input",{type:"number",id:"amount",value:h,onChange:e=>p(e.target.value),min:"1",required:!0}),(0,u.jsx)("p",{className:"bg-[#be343b] text-center text-sm text-white mt-2 py-2",children:"Minimum recharge amount is Rs. 300"}),(0,u.jsxs)("div",{className:"modal2-buttons",children:[(0,u.jsx)("button",{type:"submit",children:"Add Money"}),(0,u.jsx)("button",{type:"button",onClick:t,children:"Cancel"})]})]})]})]})}}}]);
//# sourceMappingURL=6908.22dbe967.chunk.js.map