"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[2305],{97959:(e,a,t)=>{t.d(a,{A:()=>n});t(65043);var o=t(70579);const n=e=>{const{type:a,label:t,i_id:n,i_class:s,name:r,val:d,onChng:i,onBlr:c,style:u}=e;return(0,o.jsxs)("div",{className:"form-floating mt-3",children:[(0,o.jsx)("label",{htmlFor:t,children:t}),(0,o.jsx)("input",{type:a,className:`form-control ${s}`,id:n,placeholder:t,value:d,onChange:i,style:u,onBlur:c})]})}},62305:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var o=t(65043),n=t(97959),s=t(83003),r=t(73216),d=t(78745),i=(t(80899),t(58344)),c=t(86213),u=t(63127),p=t(25981);const l={getCoupons:async()=>(await c.A.get(`${p.A}coupon/`,u.$)).data,createCoupons:async e=>(await c.A.post(`${p.A}coupon/`,e,u.$)).data,deleteCoupon:async e=>(await c.A.delete(`${p.A}coupon/${e}`,u.$)).data,getCoupon:async e=>(await c.A.get(`${p.A}coupon/${e}`,u.$)).data,updateCoupon:async e=>(await c.A.put(`${p.A}coupon/${e.id}`,{name:e.couponData.name,expiry:e.couponData.expiry,discount:e.couponData.discount},u.$)).data},y=(0,i.zD)("coupon/get-coupons",(async e=>{try{return await l.getCoupons()}catch(a){return e.rejectWithValue(a)}})),g=(0,i.zD)("coupon/create-coupon",(async(e,a)=>{try{return await l.createCoupons(e)}catch(t){return a.rejectWithValue(t)}})),h=(0,i.zD)("coupon/delete-coupon",(async(e,a)=>{try{return await l.deleteCoupon(e)}catch(t){return a.rejectWithValue(t)}})),m=(0,i.zD)("coupon/get-coupon",(async(e,a)=>{try{return await l.getCoupon(e)}catch(t){return a.rejectWithValue(t)}})),C=(0,i.zD)("color/update-coupon",(async(e,a)=>{try{return await l.updateCoupon(e)}catch(t){return a.rejectWithValue(t)}})),f=(0,i.VP)("Reset_all"),A={coupons:[],isError:!1,isLoading:!1,isSuccess:!1,message:""};(0,i.Z0)({name:"coupons",initialState:A,reducers:{},extraReducers:e=>{e.addCase(y.pending,(e=>{e.isLoading=!0})).addCase(y.fulfilled,((e,a)=>{e.isLoading=!1,e.isError=!1,e.isSuccess=!0,e.coupons=a.payload})).addCase(y.rejected,((e,a)=>{e.isLoading=!1,e.isError=!0,e.isSuccess=!1,e.message=a.error})).addCase(g.pending,(e=>{e.isLoading=!0})).addCase(g.fulfilled,((e,a)=>{e.isLoading=!1,e.isError=!1,e.isSuccess=!0,e.createdCoupon=a.payload})).addCase(g.rejected,((e,a)=>{e.isLoading=!1,e.isError=!0,e.isSuccess=!1,e.message=a.error})).addCase(h.pending,(e=>{e.isLoading=!0})).addCase(h.fulfilled,((e,a)=>{e.isLoading=!1,e.isError=!1,e.isSuccess=!0,e.deletedCoupon=a.payload})).addCase(h.rejected,((e,a)=>{e.isLoading=!1,e.isError=!0,e.isSuccess=!1,e.message=a.error})).addCase(m.pending,(e=>{e.isLoading=!0})).addCase(m.fulfilled,((e,a)=>{e.isLoading=!1,e.isError=!1,e.isSuccess=!0,e.couponName=a.payload[0].name,e.couponDiscount=a.payload[0].discount,e.couponExpiry=a.payload[0].expiry})).addCase(m.rejected,((e,a)=>{e.isLoading=!1,e.isError=!0,e.isSuccess=!1,e.message=a.error})).addCase(C.pending,(e=>{e.isLoading=!0})).addCase(C.fulfilled,((e,a)=>{e.isLoading=!1,e.isError=!1,e.isSuccess=!0,e.couponName=a.payload[0].name,e.couponDiscount=a.payload[0].discount,e.couponExpiry=a.payload[0].expiry})).addCase(C.rejected,((e,a)=>{e.isLoading=!1,e.isError=!0,e.isSuccess=!1,e.message=a.error})).addCase(f,(()=>A))}}).reducer;var j=t(1880),E=t(86111),v=t.n(E),x=t(70579);const S=()=>{const e=(0,s.wA)(),a=(0,r.zy)(),t=(0,r.Zp)(),i=a.pathname.split("/")[3];(0,o.useEffect)((()=>{e(void 0!==i?m(i):f())}),[i]);const[u,p]=(0,o.useState)(""),[l,y]=(0,o.useState)(""),g=j.A.get("token"),h=g?v().AES.decrypt(g,"Abhinanadan02").toString(v().enc.Utf8):null,[C,A]=(0,o.useState)(""),[E,S]=(0,o.useState)();return(0,x.jsxs)("div",{children:[(0,x.jsx)(d.N9,{}),(0,x.jsxs)("h3",{className:"mb-4 title",children:[void 0!==i?"Edit":"Add"," Coupon"]}),(0,x.jsxs)("div",{children:[(0,x.jsx)(n.A,{type:"text",name:"name",onChng:e=>y(e.target.value),val:l,label:"Enter Coupon Name",id:"name"}),(0,x.jsx)(n.A,{type:"date",name:"expiry",onChng:e=>A(e.target.value),val:C,label:"Enter Start Date",id:"date"}),(0,x.jsx)(n.A,{type:"date",name:"expiry",onChng:e=>p(e.target.value),val:u,label:"Enter End Date",id:"date"}),(0,x.jsx)(n.A,{type:"number",name:"discount",onChng:e=>S(e.target.value),val:E,label:"Enter Discount (%)",id:"discount"}),(0,x.jsxs)("button",{className:"btn btn-success border-0 rounded-3 my-5",type:"submit",onClick:void 0!==i?async e=>{try{const e={url:`/editpromocode/${i}`,method:"post",baseURL:"https://majesticmall.net/api/admin",headers:{"content-type":"application/json"},headers:{Authorization:`Bearer ${h}`},data:{startdate:C,promocode:l,enddate:u,discountpercentage:E}};await(0,c.A)(e).then((function(e){200===e.status&&(d.oR.info("Coupon updated successfully"),p(""),S(),A(""),y(""),t("/admindashboard/coupon-list"))}))}catch(a){console.error(a)}}:async e=>{if(e.preventDefault(),C&&l&&u&&E)try{const e={url:"/addpromocode",method:"post",baseURL:"https://majesticmall.net/api/admin",headers:{"content-type":"application/json"},headers:{Authorization:`Bearer ${h}`},data:{startdate:C,promocode:l,enddate:u,discountpercentage:E}};await(0,c.A)(e).then((function(e){200===e.status&&(d.oR.info("Coupon added successfully"),p(""),S(),A(""),y(""))}))}catch(a){console.error(a)}else d.oR.info("All fields are required")},children:[void 0!==i?"Edit":"Add"," Coupon"]})]})]})}},63127:(e,a,t)=>{t.d(a,{$:()=>i});var o=t(1880),n=t(86111),s=t.n(n);const r=o.A.get("user"),d=r?JSON.parse(s().AES.decrypt(r,"Abhinanadan02").toString(s().enc.Utf8)):null,i={headers:{Authorization:`Bearer ${null!==d?d.token:""}`,Accept:"application/json"}}},25981:(e,a,t)=>{t.d(a,{A:()=>o});const o="http://localhost:3000/api/"}}]);
//# sourceMappingURL=2305.9685238a.chunk.js.map