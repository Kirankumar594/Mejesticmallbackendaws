{"version":3,"file":"static/js/8099.6bca8ad6.chunk.js","mappings":"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","sources":["components/admin/pages/AddTitle.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Table, Modal, message, Space, Typography } from 'antd';\r\nimport { PlusOutlined, SearchOutlined } from '@ant-design/icons';\r\nimport { Trash2, Edit, FileSpreadsheet } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\nimport Cookies from 'js-cookie';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst API_BASE_URL = 'https://majesticmall.net/api/admin';\r\nconst { Title } = Typography;\r\nconst { confirm } = Modal;\r\nconst AddTitle = () => {\r\n  const encryptionKey = process.env.REACT_APP_ENCRYPTION_KEY;\r\n  const encryptedToken = Cookies.get('token');\r\n  const token = encryptedToken ? CryptoJS.AES.decrypt(encryptedToken, encryptionKey).toString(CryptoJS.enc.Utf8) : null;\r\n\r\n  const [titles, setTitles] = useState([]);\r\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\r\n  const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n  const [editingTitle, setEditingTitle] = useState(null);\r\n  const [form] = Form.useForm();\r\n  const [searchText, setSearchText] = useState('');\r\n  const [filteredTitles, setFilteredTitles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchTitles();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredTitles(\r\n      titles.filter((title) =>\r\n        Object.values(title).some(\r\n          (val) => val && val.toString().toLowerCase().includes(searchText.toLowerCase())\r\n        )\r\n      )\r\n    );\r\n  }, [titles, searchText]);\r\n\r\n  const fetchTitles = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/getTitle`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      setTitles(response.data?.Title || []);\r\n    } catch (error) {\r\n      message.error('Failed to fetch titles');\r\n    }\r\n  };\r\n\r\n  const handleAddTitle = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/addTitle`, {\r\n        title: values.title\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Title added successfully');\r\n      setIsAddModalVisible(false);\r\n      form.resetFields();\r\n      fetchTitles();\r\n    } catch (error) {\r\n      message.error('Failed to add title');\r\n    }\r\n  };\r\n\r\n  const handleEditTitle = async (values) => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/editTitle/${editingTitle._id}`, {\r\n        title: values.title\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      message.success('Title updated successfully');\r\n      setIsEditModalVisible(false);\r\n      form.resetFields();\r\n      fetchTitles();\r\n    } catch (error) {\r\n      message.error('Failed to update title');\r\n    }\r\n  };\r\n  const showDeleteConfirm = (id) => {\r\n    confirm({\r\n      title: \"Are you sure you want to delete?\",\r\n      content: \"This action cannot be undone.\",\r\n      okText: \"Yes\",\r\n      okType: \"danger\",\r\n      cancelText: \"No\",\r\n      onOk() {\r\n        handleDeleteTitle(id);\r\n      },\r\n      onCancel() {\r\n        console.log(\"Deletion cancelled\");\r\n      },\r\n    });\r\n  };\r\n  const handleDeleteTitle = async (id) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/deletetitle/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      message.success('Title deleted successfully');\r\n      fetchTitles();\r\n    } catch (error) {\r\n      message.error('Failed to delete title');\r\n    }\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    const dataToExport = filteredTitles.map(({ _id, title }) => ({\r\n      'Title': title,\r\n    }));\r\n    const worksheet = XLSX.utils.json_to_sheet(dataToExport);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Titles');\r\n    XLSX.writeFile(workbook, 'titles.xlsx');\r\n  };\r\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10 });\r\n\r\n\r\n  const handleTableChange = (newPagination) => {\r\n    setPagination(newPagination);\r\n  };\r\n  const columns = [\r\n    {\r\n      title: \"Serial No.\",\r\n      key: \"serialNo\",\r\n      render: (_, __, index) => (pagination.current - 1) * pagination.pageSize + index + 1,\r\n    },\r\n    {\r\n      title: 'Title',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Edit color=\"blue\" />}\r\n            onClick={() => {\r\n              setEditingTitle(record);\r\n              setIsEditModalVisible(true);\r\n              form.setFieldsValue({ title: record.title });\r\n            }}\r\n          />\r\n          <Button\r\n            type=\"text\"\r\n            icon={<Trash2 color=\"red\" />}\r\n            onClick={() => showDeleteConfirm(record._id)}\r\n          />\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 16 }}>\r\n        <Title level={3} className=\"title\">Titles</Title>\r\n        <Space>\r\n          <Input\r\n            placeholder=\"Search titles\"\r\n            prefix={<SearchOutlined />}\r\n            value={searchText}\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n          />\r\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={() => setIsAddModalVisible(true)}>\r\n            Add Title\r\n          </Button>\r\n          <Button type=\"primary\" icon={<FileSpreadsheet size={16} />} onClick={exportToExcel}>Export to Excel</Button>\r\n        </Space>\r\n      </div>\r\n\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredTitles}\r\n        rowKey=\"_id\"\r\n        pagination={{\r\n          ...pagination,\r\n          onChange: (page, pageSize) => handleTableChange({ current: page, pageSize }),\r\n        }}\r\n        scroll={{ x: \"max-content\" }}\r\n        components={{\r\n          header: {\r\n            cell: (props) => (\r\n              <th\r\n                {...props}\r\n                style={{\r\n                  ...props.style,\r\n                  background: \"linear-gradient(#000,#000,#000)\",\r\n                  color: \"white\",\r\n                }}\r\n              />\r\n            ),\r\n          },\r\n        }}\r\n      />\r\n\r\n      <Modal\r\n        title=\"Add Title\"\r\n        visible={isAddModalVisible}\r\n        onCancel={() => setIsAddModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleAddTitle} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"title\"\r\n            label=\"Title\"\r\n            rules={[{ required: true, message: 'Please enter a title' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Add Title\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <Modal\r\n        title=\"Edit Title\"\r\n        visible={isEditModalVisible}\r\n        onCancel={() => setIsEditModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form form={form} onFinish={handleEditTitle} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"title\"\r\n            label=\"Title\"\r\n            rules={[{ required: true, message: 'Please enter a title' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Update Title\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTitle;"],"names":["API_BASE_URL","Title","Typography","confirm","Modal","AddTitle","encryptedToken","Cookies","get","token","CryptoJS","decrypt","process","toString","Utf8","titles","setTitles","useState","isAddModalVisible","setIsAddModalVisible","isEditModalVisible","setIsEditModalVisible","editingTitle","setEditingTitle","form","Form","useForm","searchText","setSearchText","filteredTitles","setFilteredTitles","useEffect","fetchTitles","filter","title","Object","values","some","val","toLowerCase","includes","async","_response$data","response","axios","headers","Authorization","data","error","message","handleDeleteTitle","delete","id","success","pagination","setPagination","current","pageSize","columns","key","render","_","__","index","dataIndex","record","_jsxs","Space","children","_jsx","Button","type","icon","Edit","color","onClick","setFieldsValue","Trash2","showDeleteConfirm","_id","content","okText","okType","cancelText","onOk","onCancel","console","log","style","display","justifyContent","marginBottom","level","className","Input","placeholder","prefix","SearchOutlined","value","onChange","e","target","PlusOutlined","FileSpreadsheet","size","exportToExcel","dataToExport","map","_ref","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","Table","dataSource","rowKey","page","scroll","x","components","header","cell","props","background","visible","footer","onFinish","post","resetFields","layout","Item","name","label","rules","required","htmlType"],"sourceRoot":""}