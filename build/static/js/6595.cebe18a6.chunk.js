"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[6595],{96595:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var i=n(65043),s=n(23927),r=n(46909),a=n(59748),l=n(22019),o=n(6051),c=n(3188),u=n(27210),d=n(49757),y=n(62058),A=n(75337),h=n(26533),p=n(9855),x=n(1457),j=n(86213),m=n(11238),f=n(1880),U=n(86111),g=n.n(U),k=n(70579);const b="https://majesticmall.net/api/admin",{Title:v}=s.A,{confirm:S}=r.A,C=()=>{const e=f.A.get("token"),t=e?g().AES.decrypt(e,"Abhinanadan02").toString(g().enc.Utf8):null,[n,s]=(0,i.useState)([]),[U,C]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),[F,$]=(0,i.useState)(null),[z]=a.A.useForm(),[T,E]=(0,i.useState)(""),[B,I]=(0,i.useState)([]);(0,i.useEffect)((()=>{N()}),[]),(0,i.useEffect)((()=>{I(n.filter((e=>Object.values(e).some((e=>e&&e.toString().toLowerCase().includes(T.toLowerCase()))))))}),[n,T]);const N=async()=>{try{var e;const n=await j.A.get(`${b}/getUnit`,{headers:{Authorization:`Bearer ${t}`}});s((null===(e=n.data)||void 0===e?void 0:e.Unit)||[])}catch(n){l.Ay.error("Failed to fetch units")}},W=async e=>{try{await j.A.delete(`${b}/deleteunit/${e}`,{headers:{Authorization:`Bearer ${t}`}}),l.Ay.success("Unit deleted successfully"),N()}catch(n){l.Ay.error("Failed to delete unit")}},[q,L]=(0,i.useState)({current:1,pageSize:10}),O=[{title:"Serial No.",key:"serialNo",render:(e,t,n)=>(q.current-1)*q.pageSize+n+1},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Action",key:"action",render:(e,t)=>(0,k.jsxs)(o.A,{children:[(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(h.A,{color:"blue"}),onClick:()=>{$(t),_(!0),z.setFieldsValue({unit:t.unit})}}),(0,k.jsx)(c.Ay,{type:"text",icon:(0,k.jsx)(p.A,{color:"red"}),onClick:()=>{return e=t._id,void S({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){W(e)},onCancel(){}});var e}})]})}];return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,k.jsx)(v,{level:3,className:"title",children:"Units"}),(0,k.jsxs)(o.A,{children:[(0,k.jsx)(u.A,{placeholder:"Search units",prefix:(0,k.jsx)(y.A,{}),value:T,onChange:e=>E(e.target.value)}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(A.A,{}),onClick:()=>C(!0),children:"Add Unit"}),(0,k.jsx)(c.Ay,{type:"primary",icon:(0,k.jsx)(x.A,{size:16}),onClick:()=>{const e=B.map((e=>{let{_id:t,unit:n}=e;return{Unit:n}})),t=m.Wp.json_to_sheet(e),n=m.Wp.book_new();m.Wp.book_append_sheet(n,t,"Units"),m._h(n,"units.xlsx")},children:"Export to Excel"})]})]}),(0,k.jsx)(d.A,{columns:O,dataSource:B,rowKey:"_id",pagination:{...q,onChange:(e,t)=>{L({current:e,pageSize:t})}},scroll:{x:"max-content"},components:{header:{cell:e=>(0,k.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#000,#000,#000)",color:"white"}})}}}),(0,k.jsx)(r.A,{unit:"Add Unit",visible:U,onCancel:()=>C(!1),footer:null,children:(0,k.jsxs)(a.A,{form:z,onFinish:async e=>{try{await j.A.post(`${b}/addUnit`,{unit:e.unit},{headers:{Authorization:`Bearer ${t}`}}),l.Ay.success("Unit added successfully"),C(!1),z.resetFields(),N()}catch(n){l.Ay.error("Failed to add unit")}},layout:"vertical",children:[(0,k.jsx)(a.A.Item,{name:"unit",label:"Unit",rules:[{required:!0,message:"Please enter a unit"}],children:(0,k.jsx)(u.A,{})}),(0,k.jsx)(a.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Add Unit"})})]})}),(0,k.jsx)(r.A,{unit:"Edit Unit",visible:w,onCancel:()=>_(!1),footer:null,children:(0,k.jsxs)(a.A,{form:z,onFinish:async e=>{try{await j.A.post(`${b}/editUnit/${F._id}`,{unit:e.unit},{headers:{Authorization:`Bearer ${t}`}}),l.Ay.success("Unit updated successfully"),_(!1),z.resetFields(),N()}catch(n){l.Ay.error("Failed to update unit")}},layout:"vertical",children:[(0,k.jsx)(a.A.Item,{name:"unit",label:"Unit",rules:[{required:!0,message:"Please enter a unit"}],children:(0,k.jsx)(u.A,{})}),(0,k.jsx)(a.A.Item,{children:(0,k.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Update Unit"})})]})})]})}}}]);
//# sourceMappingURL=6595.cebe18a6.chunk.js.map