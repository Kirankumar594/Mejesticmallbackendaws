"use strict";(self.webpackChunkfruit_app=self.webpackChunkfruit_app||[]).push([[1011],{81011:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var a=t(65043),r=t(23927),i=t(46909),l=t(59748),s=t(22019),d=t(3188),c=t(49757),o=t(6036),u=t(27210),p=t(67407),y=t(75337),m=t(9855),h=t(86213),A=t(1880),x=t(86111),b=t.n(x),j=t(70579);const{Title:g}=r.A,{confirm:f}=i.A,k="https://majesticmall.net/api/admin",C=()=>{const e=A.A.get("token"),n=e?b().AES.decrypt(e,"Abhinanadan02").toString(b().enc.Utf8):null,[t,r]=(0,a.useState)([]),[x,C]=(0,a.useState)(!1),[B,v]=(0,a.useState)(!1),[T,F]=(0,a.useState)(null),[w]=l.A.useForm(),[$]=l.A.useForm();(0,a.useEffect)((()=>{I()}),[]);const I=async()=>{try{const e=await h.A.get(`${k}/getalldiscountbanner`,{headers:{Authorization:`Bearer ${n}`}});r(e.data.banner)}catch(e){s.Ay.error("Failed to fetch banners")}},S=async e=>{try{await h.A.delete(`${k}/deletediscountbanner/${e}`,{headers:{Authorization:`Bearer ${n}`}}),s.Ay.success("Banner deleted successfully"),I()}catch(t){s.Ay.error("Failed to delete banner")}},_=[{title:"Serial No.",dataIndex:"serialNo",key:"serialNo"},{title:"Link",dataIndex:"link",key:"link"},{title:"Banner",dataIndex:"banner",key:"banner",render:e=>(0,j.jsx)("img",{src:`https://majesticmall.net/image/${e}`,alt:"Banner",style:{width:200,height:100},loading:"lazy",onError:e=>{e.target.src="../img/example.jpg"}})},{title:"Action",key:"action",render:(e,n)=>(0,j.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,j.jsx)(d.Ay,{type:"text",icon:(0,j.jsx)(p.A,{}),onClick:()=>{return F(e=n),$.setFieldsValue({type:e.link}),void v(!0);var e}}),(0,j.jsx)(d.Ay,{type:"text",icon:(0,j.jsx)(m.A,{color:"red"}),onClick:()=>{return e=n._id,void f({title:"Are you sure you want to delete?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk(){S(e)},onCancel(){}});var e}})]})}],z=t.map(((e,n)=>({key:e._id,serialNo:n+1,link:e.link,banner:e.banner,_id:e._id})));return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,j.jsx)(g,{level:3,className:"title",children:"Discount Banners"}),(0,j.jsx)(d.Ay,{type:"primary",icon:(0,j.jsx)(y.A,{}),onClick:()=>C(!0),children:"Add Banner"})]}),(0,j.jsx)(c.A,{columns:_,dataSource:z,pagination:{pageSize:10},scroll:{x:"max-content"},components:{header:{cell:e=>(0,j.jsx)("th",{...e,style:{...e.style,background:"linear-gradient(#5C870C,#5C870C,#5C870C)",color:"white"}})}}}),(0,j.jsx)(i.A,{title:"Add Banner",visible:x,onCancel:()=>C(!1),footer:null,children:(0,j.jsxs)(l.A,{form:w,onFinish:async e=>{try{const t=new FormData;t.append("banner",e.banner.file),t.append("link",e.type),await h.A.post(`${k}/adddiscountbanner`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}}),s.Ay.success("Banner added successfully"),C(!1),w.resetFields(),I()}catch(t){s.Ay.error("Failed to add banner")}},layout:"vertical",children:[(0,j.jsx)(l.A.Item,{name:"banner",label:"Banner Image",rules:[{required:!0,message:"Please upload a banner image"}],children:(0,j.jsx)(o.A,{accept:"image/*",listType:"picture-card",maxCount:1,beforeUpload:()=>!1,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(y.A,{}),(0,j.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,j.jsx)(l.A.Item,{name:"type",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,j.jsx)(u.A,{})}),(0,j.jsx)(l.A.Item,{children:(0,j.jsx)(d.Ay,{type:"primary",htmlType:"submit",children:"Add Banner"})})]})}),(0,j.jsx)(i.A,{title:"Edit Banner",visible:B,onCancel:()=>v(!1),footer:null,children:(0,j.jsxs)(l.A,{form:$,onFinish:async e=>{try{const t=new FormData;e.banner&&e.banner.file&&t.append("banner",e.banner.file),t.append("link",e.type),await h.A.put(`${k}/updatediscountbanner/${T._id}`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}}),s.Ay.success("Banner updated successfully"),v(!1),$.resetFields(),I()}catch(t){s.Ay.error("Failed to update banner")}},layout:"vertical",children:[(0,j.jsx)(l.A.Item,{name:"banner",label:"Banner Image",children:(0,j.jsx)(o.A,{accept:"image/*",listType:"picture-card",maxCount:1,beforeUpload:()=>!1,defaultFileList:T?[{uid:"-1",name:"current-banner",status:"done",url:`https://majesticmall.net/image/${T.banner}`}]:[],children:(0,j.jsxs)("div",{children:[(0,j.jsx)(y.A,{}),(0,j.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,j.jsx)(l.A.Item,{name:"type",label:"Title",rules:[{required:!0,message:"Please enter a title"}],children:(0,j.jsx)(u.A,{})}),(0,j.jsx)(l.A.Item,{children:(0,j.jsx)(d.Ay,{type:"primary",htmlType:"submit",children:"Update Banner"})})]})})]})}}}]);
//# sourceMappingURL=1011.4197e262.chunk.js.map